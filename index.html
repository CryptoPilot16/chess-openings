<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chess Opening Trainer</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container { max-width: 1200px; margin: 0 auto; }
    .header { text-align: center; color: white; margin-bottom: 40px; }
    .header h1 { font-size: 2.5em; margin-bottom: 10px; }
    .header p { font-size: 1.1em; opacity: 0.9; }
    
    .openings-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .opening-card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      border: 2px solid transparent;
    }
    
    .opening-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
      border-color: #667eea;
    }
    
    .opening-card h3 { color: #333; margin-bottom: 12px; font-size: 1.3em; }
    .opening-card p { color: #666; font-size: 0.9em; margin-bottom: 16px; line-height: 1.5; }
    .opening-card button {
      width: 100%;
      padding: 12px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
    }
    .opening-card button:hover { background: #5568d3; }
    
    .training-view { display: none; background: white; border-radius: 12px; padding: 40px; }
    .training-view.active { display: block; }
    
    .board-container { margin: 20px 0; }
    .chessboard {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 0;
      width: 100%;
      max-width: 400px;
      aspect-ratio: 1;
      background: #d4af37;
      border: 3px solid #8b7500;
    }
    
    .square {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      cursor: pointer;
      background: #f0d9b5;
      user-select: none;
    }
    
    .square.dark { background: #b58863; }
    .square.selected { background: #baca44 !important; box-shadow: inset 0 0 10px rgba(0,0,0,0.2); }
    
    .feedback {
      font-size: 1.2em;
      font-weight: bold;
      margin: 20px 0;
      padding: 12px;
      border-radius: 6px;
      text-align: center;
    }
    
    .feedback.correct { background: #d4edda; color: #155724; }
    .feedback.incorrect { background: #f8d7da; color: #721c24; }
    
    .progress {
      margin: 20px 0;
      font-weight: 600;
      font-size: 1.1em;
      color: #333;
    }
    
    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 8px;
    }
    
    .progress-bar-fill {
      height: 100%;
      background: #667eea;
      transition: width 0.3s;
    }
    
    .controls {
      margin-top: 20px;
      display: flex;
      gap: 10px;
    }
    
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .btn-primary { background: #667eea; color: white; }
    .btn-primary:hover { background: #5568d3; }
    .btn-secondary { background: #e0e0e0; color: #333; }
    .btn-secondary:hover { background: #d0d0d0; }
    
    .completion-screen {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    
    .completion-screen.active { display: flex !important; }
    
    .completion-card {
      background: white;
      border-radius: 12px;
      padding: 40px;
      text-align: center;
      max-width: 500px;
    }
    
    .completion-card h2 { font-size: 2em; color: #667eea; margin-bottom: 20px; }
    .completion-card p { font-size: 1.1em; color: #666; margin-bottom: 30px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>‚ôüÔ∏è Chess Opening Trainer</h1>
      <p>Master chess openings through interactive practice</p>
    </div>

    <!-- Opening Selection -->
    <div id="selectionView" class="selection-view">
      <div class="openings-grid" id="openingsGrid"></div>
    </div>

    <!-- Training View -->
    <div id="trainingView" class="training-view">
      <h2 id="openingName"></h2>
      <p id="openingDesc" style="color: #666; margin: 10px 0 20px;"></p>
      
      <div class="progress">
        <div>Move <span id="moveCount">0</span> of <span id="totalMoves">0</span></div>
        <div class="progress-bar">
          <div class="progress-bar-fill" id="progressFill"></div>
        </div>
      </div>

      <div id="feedbackMessage"></div>

      <div class="board-container">
        <div class="chessboard" id="board"></div>
      </div>

      <div class="controls">
        <button class="btn btn-primary" onclick="resetTraining()">Reset</button>
        <button class="btn btn-secondary" onclick="backToSelection()">Back</button>
      </div>
    </div>

    <!-- Completion Screen -->
    <div id="completionScreen" class="completion-screen">
      <div class="completion-card">
        <h2>üéâ Opening Complete!</h2>
        <p id="completionText"></p>
        <button class="btn btn-primary" onclick="resetTraining()" style="width: 100%;">Practice Again</button>
        <button class="btn btn-secondary" onclick="backToSelection()" style="width: 100%; margin-top: 10px;">Choose Another</button>
      </div>
    </div>
  </div>

  <script>
    // Chess Opening Data
    const openings = [
      {
        id: 'italian',
        name: 'Italian Game',
        description: 'A classic opening focusing on quick development and control of the center.',
        difficulty: 'Beginner',
        moves: ['e4', 'e5', 'Nf3', 'Nc6', 'Bc4', 'Bc5']
      },
      {
        id: 'sicilian',
        name: 'Sicilian Defense',
        description: 'The most popular response to 1.e4, leading to sharp tactical positions.',
        difficulty: 'Intermediate',
        moves: ['e4', 'c5', 'Nf3', 'd6', 'd4', 'cxd4']
      },
      {
        id: 'french',
        name: 'French Defense',
        description: 'A solid defense with a strong pawn chain.',
        difficulty: 'Intermediate',
        moves: ['e4', 'e6', 'd4', 'd5', 'Nc3', 'Nf6']
      },
      {
        id: 'queens',
        name: "Queen's Gambit",
        description: 'A classical opening offering the c4 pawn for central control.',
        difficulty: 'Intermediate',
        moves: ['d4', 'd5', 'c4', 'e6', 'Nc3', 'Nf6']
      },
      {
        id: 'ruy',
        name: 'Ruy L√≥pez',
        description: 'The Spanish Opening, one of the most popular openings at all levels.',
        difficulty: 'Advanced',
        moves: ['e4', 'e5', 'Nf3', 'Nc6', 'Bb5', 'a6']
      }
    ];

    let currentOpening = null;
    let currentMoveIndex = 0;
    let feedback = '';

    // Render opening selection
    function renderOpenings() {
      const grid = document.getElementById('openingsGrid');
      grid.innerHTML = openings.map(opening => `
        <div class="opening-card">
          <h3>${opening.name}</h3>
          <p>${opening.description}</p>
          <p style="font-size: 0.85em; color: #999; margin-bottom: 16px;">
            <strong>${opening.difficulty}</strong> ‚Ä¢ ${opening.moves.length} moves
          </p>
          <button onclick="startTraining('${opening.id}')">Start Practice</button>
        </div>
      `).join('');
    }

    // Start training
    function startTraining(openingId) {
      currentOpening = openings.find(o => o.id === openingId);
      currentMoveIndex = 0;
      
      document.getElementById('selectionView').style.display = 'none';
      document.getElementById('trainingView').classList.add('active');
      
      document.getElementById('openingName').textContent = currentOpening.name;
      document.getElementById('openingDesc').textContent = currentOpening.description;
      document.getElementById('totalMoves').textContent = currentOpening.moves.length;
      
      renderBoard();
      updateProgress();
    }

    // Render interactive board
    function renderBoard() {
      const board = document.getElementById('board');
      board.innerHTML = '';
      
      const squares = [];
      for (let i = 0; i < 64; i++) {
        const row = Math.floor(i / 8);
        const col = i % 8;
        const isDark = (row + col) % 2 === 1;
        
        const square = document.createElement('div');
        square.className = `square${isDark ? ' dark' : ''}`;
        square.textContent = ['‚ôñ', '‚ôò', '‚ôó', '‚ôï', '‚ôî', '‚ôó', '‚ôò', '‚ôñ', 
                              '‚ôô', '‚ôô', '‚ôô', '‚ôô', '‚ôô', '‚ôô', '‚ôô', '‚ôô',
                              '', '', '', '', '', '', '', '',
                              '', '', '', '', '', '', '', '',
                              '', '', '', '', '', '', '', '',
                              '', '', '', '', '', '', '', '',
                              '‚ôü', '‚ôü', '‚ôü', '‚ôü', '‚ôü', '‚ôü', '‚ôü', '‚ôü',
                              '‚ôú', '‚ôû', '‚ôù', '‚ôõ', '‚ôö', '‚ôù', '‚ôû', '‚ôú'][i] || '';
        square.onclick = () => makeMove(i);
        board.appendChild(square);
      }
    }

    // Simple move handling (just auto-advance for demo)
    let lastClick = null;
    function makeMove(squareIndex) {
      if (lastClick === null) {
        lastClick = squareIndex;
        document.querySelectorAll('.square')[squareIndex].classList.add('selected');
      } else {
        document.querySelectorAll('.square')[lastClick].classList.remove('selected');
        lastClick = null;
        completeMove();
      }
    }

    // Complete move
    function completeMove() {
      if (currentMoveIndex < currentOpening.moves.length) {
        showFeedback('correct', '‚úì Correct! Moving to next position...');
        currentMoveIndex++;
        updateProgress();
        
        setTimeout(() => {
          if (currentMoveIndex >= currentOpening.moves.length) {
            showCompletion();
          } else {
            document.getElementById('feedbackMessage').innerHTML = '';
            renderBoard();
          }
        }, 800);
      }
    }

    // Update progress
    function updateProgress() {
      document.getElementById('moveCount').textContent = currentMoveIndex;
      const percent = (currentMoveIndex / currentOpening.moves.length) * 100;
      document.getElementById('progressFill').style.width = percent + '%';
    }

    // Show feedback
    function showFeedback(type, message) {
      const el = document.getElementById('feedbackMessage');
      el.innerHTML = `<div class="feedback ${type}">${message}</div>`;
    }

    // Show completion
    function showCompletion() {
      document.getElementById('completionText').textContent = 
        `You've successfully completed the ${currentOpening.name}! Great practice session!`;
      document.getElementById('completionScreen').classList.add('active');
    }

    // Reset training
    function resetTraining() {
      currentMoveIndex = 0;
      document.getElementById('completionScreen').classList.remove('active');
      document.getElementById('feedbackMessage').innerHTML = '';
      renderBoard();
      updateProgress();
    }

    // Back to selection
    function backToSelection() {
      currentOpening = null;
      currentMoveIndex = 0;
      document.getElementById('trainingView').classList.remove('active');
      document.getElementById('selectionView').style.display = 'block';
      document.getElementById('completionScreen').classList.remove('active');
    }

    // Initialize
    renderOpenings();
  </script>
</body>
</html>

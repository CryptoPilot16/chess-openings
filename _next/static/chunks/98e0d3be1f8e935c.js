(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56563,30800,80447,e=>{"use strict";function t(e,t){let n;if(e<3)return{...t,interval:1,repetitions:0,easeFactor:Math.max(1.3,t.easeFactor-.2),lastReview:new Date().toISOString(),nextReview:a(1).toISOString()};let r=t.repetitions+1;n=1===r?1:2===r?6:Math.round(t.interval*t.easeFactor);let l=Math.max(1.3,Math.min(2.5,t.easeFactor+(.1-(5-e)*(.08+(5-e)*.02))));return{...t,interval:n,repetitions:r,easeFactor:l,lastReview:new Date().toISOString(),nextReview:a(n).toISOString()}}function n(e){return{openingId:e,easeFactor:2.5,interval:1,repetitions:0,nextReview:a(1).toISOString(),lastReview:new Date().toISOString()}}function r(e){return new Date>=new Date(e.nextReview)}function l(e){return e>=95?5:e>=85?4:e>=75?3:e>=60?2:+(e>=40)}function a(e){let t=new Date;return t.setDate(t.getDate()+e),t}function s(e){let t,n=(t=new Date,Math.ceil((new Date(e.nextReview).getTime()-t.getTime())/864e5));return n<0?"Overdue!":0===n?"Due today":1===n?"Due tomorrow":n<7?`Due in ${n} days`:n<30?`Due in ${Math.round(n/7)} weeks`:`Due in ${Math.round(n/30)} months`}function i(e){let t=1,n=0;for(;;){let r=Math.floor(100*Math.pow(1.5,t-1));if(n+r>e)return{level:t,currentXP:e-n,xpForNextLevel:r,totalXP:e};n+=r,t++}}function o(e,t,n,r){if(!n)return 0;let l=t/e,a=0;return l>=.95?a=50:l>=.85?a=30:l>=.75&&(a=15),Math.floor((50+a)*({beginner:1,intermediate:1.5,advanced:2})[r])}e.s(["accuracyToQuality",()=>l,"calculateNextReview",()=>t,"createReviewCard",()=>n,"getReviewScheduleText",()=>s,"isDueForReview",()=>r],30800);let c=[{id:"first-opening",name:"First Steps",description:"Complete your first opening",emoji:"ðŸŽ¯",target:1},{id:"five-openings",name:"Opening Explorer",description:"Complete 5 different openings",emoji:"ðŸ—ºï¸",target:5},{id:"perfect-run",name:"Perfectionist",description:"Complete an opening with 100% accuracy",emoji:"ðŸ’Ž",target:1},{id:"streak-5",name:"On Fire",description:"Maintain a 5-session streak",emoji:"ðŸ”¥",target:5},{id:"streak-10",name:"Unstoppable",description:"Maintain a 10-session streak",emoji:"âš¡",target:10},{id:"advanced-master",name:"Grandmaster",description:"Complete all advanced openings",emoji:"ðŸ‘‘",target:1},{id:"speed-demon",name:"Speed Demon",description:"Complete an opening in under 2 minutes",emoji:"ðŸš€",target:1},{id:"level-5",name:"Apprentice",description:"Reach level 5",emoji:"â­",target:5},{id:"level-10",name:"Expert",description:"Reach level 10",emoji:"ðŸŒŸ",target:10},{id:"level-20",name:"Master",description:"Reach level 20",emoji:"âœ¨",target:20}];function d(e,t,n){let r=[],l=new Date().toISOString();for(let e of c){let a=n.find(t=>t.id===e.id);if(a?.unlockedAt)continue;let s=!1;switch(e.id){case"first-opening":t.totalCompletions,s=(t.totalCompletions||0)>=1;break;case"five-openings":t.uniqueOpeningsCompleted,s=(t.uniqueOpeningsCompleted||0)>=5;break;case"perfect-run":s=(t.perfectRuns||0)>=1;break;case"streak-5":t.currentStreak,s=(t.currentStreak||0)>=5;break;case"streak-10":t.currentStreak,s=(t.currentStreak||0)>=10;break;case"level-5":let o=i(t.totalXP||0);o.level,s=o.level>=5;break;case"level-10":let c=i(t.totalXP||0);c.level,s=c.level>=10;break;case"level-20":let d=i(t.totalXP||0);d.level,s=d.level>=20;break;default:continue}s&&r.push({...e,progress:100,unlockedAt:l})}return r}function u(e){return e<5?"Novice":e<10?"Apprentice":e<15?"Intermediate":e<20?"Advanced":e<30?"Expert":e<50?"Master":"Grandmaster"}e.s(["ACHIEVEMENTS",0,c,"calculateXPReward",()=>o,"checkAchievements",()=>d,"getLevelFromXP",()=>i,"getLevelTitle",()=>u],80447);let m="chess-trainer-openings",g="chess-trainer-stats",p="chess-trainer-reviews",h="chess-trainer-achievements";function x(e){try{let t=localStorage.getItem(m);if(!t)return null;return JSON.parse(t)[e]||null}catch(e){return console.error("Error reading opening progress:",e),null}}function f(e,t){try{let n=localStorage.getItem(m),r=n?JSON.parse(n):{},l=r[e]||{openingId:e,completedCount:0,lastPracticed:new Date().toISOString(),bestStreak:0,currentStreak:0,averageAccuracy:0,totalMoves:0,correctMoves:0};r[e]={...l,...t,lastPracticed:new Date().toISOString()},r[e].totalMoves>0&&(r[e].averageAccuracy=Math.round(r[e].correctMoves/r[e].totalMoves*100)),localStorage.setItem(m,JSON.stringify(r))}catch(e){console.error("Error saving opening progress:",e)}}function v(){try{let e=localStorage.getItem(m);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading all opening progress:",e),{}}}function b(){let e={totalSessions:0,totalMovesPlayed:0,correctMovesTotal:0,startedAt:new Date().toISOString(),lastActive:new Date().toISOString(),totalXP:0,totalCompletions:0,uniqueOpeningsCompleted:0,perfectRuns:0,currentStreak:0,bestStreak:0};try{let t=localStorage.getItem(g);if(!t)return localStorage.setItem(g,JSON.stringify(e)),e;let n=JSON.parse(t);return{...e,...n}}catch(t){return console.error("Error reading user stats:",t),e}}function N(e){try{let t={...b(),...e,lastActive:new Date().toISOString()};localStorage.setItem(g,JSON.stringify(t))}catch(e){console.error("Error saving user stats:",e)}}function y(e,r,a,s,i){let c=b(),u=x(e),m=r>0?a/r*100:0,g=100===m,p=0;s&&i&&(p=o(r,a,!0,i.difficulty)),u?.completedCount;let h=s?(u?.currentStreak||0)+1:0;if(f(e,{completedCount:(u?.completedCount||0)+ +!!s,currentStreak:h,bestStreak:Math.max(h,u?.bestStreak||0),totalMoves:(u?.totalMoves||0)+r,correctMoves:(u?.correctMoves||0)+a}),s){let r=w(e);r||(r=n(e)),j(t(l(m),r))}let y=Object.values(v()).filter(e=>e.completedCount>0).length,S={...c},k=s?c.currentStreak+1:0;N({totalSessions:c.totalSessions+1,totalMovesPlayed:c.totalMovesPlayed+r,correctMovesTotal:c.correctMovesTotal+a,totalXP:c.totalXP+p,totalCompletions:c.totalCompletions+ +!!s,uniqueOpeningsCompleted:y,perfectRuns:c.perfectRuns+(g&&s?1:0),currentStreak:k,bestStreak:Math.max(k,c.bestStreak)});let P=b(),M=C(),I=d(S,P,M);return I.length>0&&O([...M,...I]),{xpEarned:p,newAchievements:I}}function w(e){try{let t=localStorage.getItem(p);if(!t)return null;return JSON.parse(t)[e]||null}catch(e){return console.error("Error reading review card:",e),null}}function j(e){try{let t=localStorage.getItem(p),n=t?JSON.parse(t):{};n[e.openingId]=e,localStorage.setItem(p,JSON.stringify(n))}catch(e){console.error("Error saving review card:",e)}}function S(){try{let e=localStorage.getItem(p);if(!e)return[];let t=JSON.parse(e);return Object.values(t)}catch(e){return console.error("Error reading review cards:",e),[]}}function k(){return S().filter(r).map(e=>e.openingId)}function C(){try{let e=localStorage.getItem(h);if(!e)return[];return JSON.parse(e)}catch(e){return console.error("Error reading achievements:",e),[]}}function O(e){try{localStorage.setItem(h,JSON.stringify(e))}catch(e){console.error("Error saving achievements:",e)}}e.s(["getAchievements",()=>C,"getAllOpeningProgress",()=>v,"getAllReviewCards",()=>S,"getDueOpenings",()=>k,"getOpeningProgress",()=>x,"getReviewCard",()=>w,"getUserStats",()=>b,"recordSession",()=>y,"saveAchievements",()=>O,"updateOpeningProgress",()=>f,"updateReviewCard",()=>j,"updateUserStats",()=>N],56563)},30315,e=>{"use strict";e.s(["openings",0,[{id:"italian-game",name:"Italian Game",description:"One of the oldest recorded openings, focusing on quick development and control of the center.",difficulty:"beginner",mainLine:["e4","e5","Nf3","Nc6","Bc4","Bc5","c3","d6","d4"],keyIdeas:["Control the center with pawns","Develop pieces quickly (knights before bishops)","Castle kingside early for safety","Attack the weak f7 square","Build a strong pawn center with c3 and d4"],variations:[{name:"Giuoco Piano",moves:["e4","e5","Nf3","Nc6","Bc4","Bc5","c3"]},{name:"Two Knights Defense",moves:["e4","e5","Nf3","Nc6","Bc4","Nf6"]}]},{id:"sicilian-defense",name:"Sicilian Defense",description:"The most popular and aggressive response to 1.e4, leading to asymmetrical positions.",difficulty:"intermediate",mainLine:["e4","c5","Nf3","d6","d4","cxd4","Nxd4","Nf6","Nc3"],keyIdeas:["Fight for central control with c5 instead of e5","Create asymmetrical pawn structures","Counterattack on the queenside","Maintain tension in the center","Accept complex tactical positions"],variations:[{name:"Najdorf Variation",moves:["e4","c5","Nf3","d6","d4","cxd4","Nxd4","Nf6","Nc3","a6"]},{name:"Dragon Variation",moves:["e4","c5","Nf3","d6","d4","cxd4","Nxd4","Nf6","Nc3","g6"]}]},{id:"french-defense",name:"French Defense",description:"A solid defense creating a strong pawn chain, though temporarily restricting the c8 bishop.",difficulty:"intermediate",mainLine:["e4","e6","d4","d5","Nc3","Nf6","Bg5"],keyIdeas:["Create a solid pawn structure with e6 and d5","Challenge white's center immediately","Plan to break with ...c5 or ...f6","Accept a temporarily passive c8 bishop","Counterattack on the queenside"],variations:[{name:"Winawer Variation",moves:["e4","e6","d4","d5","Nc3","Bb4"]},{name:"Tarrasch Variation",moves:["e4","e6","d4","d5","Nd2"]}]},{id:"queens-gambit",name:"Queen's Gambit",description:"A classical opening where White offers a pawn to gain central control and faster development.",difficulty:"intermediate",mainLine:["d4","d5","c4","e6","Nc3","Nf6","Bg5"],keyIdeas:["Offer the c4 pawn to challenge Black's center","Control the center with pieces after ...dxc4","Develop smoothly with Nc3, Nf3, and Bg5","Put pressure on Black's position","Maintain central control"],variations:[{name:"Queen's Gambit Declined",moves:["d4","d5","c4","e6","Nc3","Nf6"]},{name:"Queen's Gambit Accepted",moves:["d4","d5","c4","dxc4"]}]},{id:"ruy-lopez",name:"Ruy LÃ³pez",description:"Also known as the Spanish Opening, this classical opening puts immediate pressure on e5.",difficulty:"advanced",mainLine:["e4","e5","Nf3","Nc6","Bb5","a6","Ba4","Nf6","O-O"],keyIdeas:["Put pressure on the e5 pawn immediately","Develop pieces harmoniously","Maintain flexibility with the light-squared bishop","Castle kingside quickly","Build a strong center"],variations:[{name:"Berlin Defense",moves:["e4","e5","Nf3","Nc6","Bb5","Nf6"]},{name:"Marshall Attack",moves:["e4","e5","Nf3","Nc6","Bb5","a6","Ba4","Nf6","O-O","Be7","Re1","b5","Bb3","O-O","d4","d5"]}]},{id:"caro-kann-defense",name:"Caro-Kann Defense",description:"A solid and positional defense against 1.e4, gaining space on the queenside without blocking the c-pawn.",difficulty:"beginner",mainLine:["e4","c6","d4","d5","Nc3","Nf6","Bg5"],keyIdeas:["Support the d5 pawn with c6","Avoid blocking the c-pawn early","Create a solid pawn structure","Counterattack on the queenside","Develop pieces naturally"],variations:[{name:"Main Line",moves:["e4","c6","d4","d5","Nc3","Nf6","Bg5","Ne4"]},{name:"Classical Variation",moves:["e4","c6","d4","d5","Nc3","Nf6","Bg5","Be7"]}]},{id:"english-opening",name:"English Opening",description:"A flexible opening starting with 1.c4, controlling the center from the side rather than directly.",difficulty:"intermediate",mainLine:["c4","e5","Nc3","Nf6","Nf3","Nc6","g3"],keyIdeas:["Control the center from the wings","Maintain flexibility in opening plans","Fianchetto the kingside bishop","Build a setup without committing the d-pawn","Create long-term positional advantages"],variations:[{name:"Indian Setup",moves:["c4","Nf6","Nc3","g6","g3","Bg7","Bg2"]},{name:"Symmetrical Defense",moves:["c4","c5","Nc3","Nc6"]}]},{id:"scandinavian-defense",name:"Scandinavian Defense",description:"A tactical and aggressive response to 1.e4, putting immediate pressure on the center.",difficulty:"intermediate",mainLine:["e4","d5","exd5","Qxd5","Nc3","Qa5","Nf3","Nf6","Bc4"],keyIdeas:["Challenge the center immediately","Bring the queen out early for activity","Attack the Nc3 knight","Create tactical complications","Compensate for space disadvantage"],variations:[{name:"Main Line",moves:["e4","d5","exd5","Qxd5","Nc3","Qa5"]},{name:"Portuguese Variation",moves:["e4","d5","exd5","Qxd5","Nc3","Qd8"]}]},{id:"kings-indian-attack",name:"King's Indian Attack",description:"A flexible and positional setup where White controls the center with Nf3, g3, and fianchettos the kingside bishop.",difficulty:"intermediate",mainLine:["Nf3","d5","d3","Nf6","c4","e6","g3","Be7","Bg2"],keyIdeas:["Control the center with pieces, not pawns","Maintain maximum flexibility","Fianchetto the kingside bishop for long-term pressure","Build a solid pawn structure","Create strategic imbalances"],variations:[{name:"Immediate c4",moves:["Nf3","d5","c4","Nf6","g3","e6","d3"]},{name:"Flexible Setup",moves:["Nf3","c5","g3","Nf6","Bg2","d6","d4"]}]},{id:"scotch-game",name:"Scotch Game",description:"An aggressive opening featuring 3.d4, challenging Black's center early and leading to open, tactical positions.",difficulty:"intermediate",mainLine:["e4","e5","Nf3","Nc6","d4","exd4","Nxd4","Nf6","Nc3","Bb4","Nxc6"],keyIdeas:["Challenge the center early with d4","Trade the knight for the bishop pair","Maintain central control","Develop pieces quickly","Create tactical opportunities"],variations:[{name:"Scotch Four Knights",moves:["e4","e5","Nf3","Nc6","d4","exd4","Nxd4","Nf6"]},{name:"Scotch Gambit",moves:["e4","e5","Nf3","Nc6","d4","exd4","Bc4"]}]}]])},31713,e=>{"use strict";var t=e.i(43476),n=e.i(71645),r=e.i(56563),l=e.i(30800),a=e.i(30315);let s="chess-trainer-daily-challenge";function i(){let e=new Date().toISOString().split("T")[0];try{let t=localStorage.getItem(s);if(t){let n=JSON.parse(t);if(n.date===e)return n}}catch(e){console.error("Error reading daily challenge:",e)}let t=Math.floor(new Date(e).getTime()/864e5)%a.openings.length,n={date:e,openingId:a.openings[t].id,attempts:3,completed:!1,xpBonus:100};return o(n),n}function o(e){try{localStorage.setItem(s,JSON.stringify(e))}catch(e){console.error("Error saving daily challenge:",e)}}function c(){let e=i();return a.openings.find(t=>t.id===e.openingId)}function d({openings:e,onSelect:a}){let[s,o]=(0,n.useState)({}),[d,u]=(0,n.useState)([]),[m,g]=(0,n.useState)(null);return(0,n.useEffect)(()=>{o((0,r.getAllOpeningProgress)()),u((0,r.getDueOpenings)()),g(i())},[]),(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:"â™Ÿï¸ Chess Opening Trainer"}),(0,t.jsx)("p",{className:"text-xl text-gray-600",children:"Master essential chess openings through interactive practice"})]}),m&&!m.completed&&(0,t.jsx)("div",{className:"mb-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl shadow-xl p-8 text-white",children:(0,t.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"ðŸŽ¯ Today's Challenge"}),(0,t.jsxs)("p",{className:"text-lg mb-3 opacity-90",children:["Complete the ",c()?.name," opening to earn +100 bonus XP!"]}),(0,t.jsxs)("p",{className:"text-sm opacity-75",children:["Attempts remaining: ",m.attempts]})]}),(0,t.jsx)("button",{onClick:()=>{if(m){let e=c();e&&a(e)}},className:"px-8 py-4 bg-white text-purple-600 font-bold rounded-lg hover:bg-opacity-90 transition transform hover:scale-105 whitespace-nowrap",children:"Start Challenge"})]})}),m?.completed&&(0,t.jsx)("div",{className:"mb-12 bg-gradient-to-r from-green-400 to-emerald-400 rounded-xl shadow-xl p-8 text-white",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"text-5xl",children:"âœ¨"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Daily Challenge Complete!"}),(0,t.jsx)("p",{className:"opacity-90",children:"Come back tomorrow for a new challenge"})]})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{let n=s[e.id],i=n&&n.completedCount>0,o=d.includes(e.id),c=(0,r.getReviewCard)(e.id);return(0,t.jsxs)("button",{onClick:()=>a(e),className:`
                  bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 p-6 text-left hover:scale-105 transform
                  ${i?"ring-2 ring-green-400":""}
                  ${o?"ring-2 ring-orange-400 animate-pulse":""}
                `,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:`
                      px-3 py-1 rounded-full text-xs font-semibold uppercase
                      ${"beginner"===e.difficulty?"bg-green-100 text-green-800":""}
                      ${"intermediate"===e.difficulty?"bg-yellow-100 text-yellow-800":""}
                      ${"advanced"===e.difficulty?"bg-red-100 text-red-800":""}
                    `,children:e.difficulty}),i&&(0,t.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:["âœ“ ",n.completedCount]})]}),(0,t.jsx)("span",{className:"text-2xl",children:"â™”"})]}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"font-semibold",children:e.mainLine.length})," moves"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"font-semibold",children:e.variations.length})," variations"]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"First moves:"}),(0,t.jsxs)("p",{className:"font-mono text-sm text-gray-700",children:[e.mainLine.slice(0,4).join(" "),"..."]})]}),i&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex gap-3 text-xs text-gray-600 mb-2",children:[n.currentStreak>0&&(0,t.jsxs)("span",{children:["ðŸ”¥ ",n.currentStreak]}),(0,t.jsxs)("span",{children:["ðŸ“Š ",n.averageAccuracy,"%"]})]}),c&&(0,t.jsxs)("div",{className:`
                      text-xs font-semibold
                      ${o?"text-orange-600":"text-gray-500"}
                    `,children:["ðŸ“… ",(0,l.getReviewScheduleText)(c)]})]})]},e.id)})}),(0,t.jsx)("div",{className:"mt-12 text-center text-gray-600",children:(0,t.jsx)("p",{className:"text-sm",children:"Click on an opening to start practicing. You'll be guided through each move with instant feedback."})})]})})}let u={p:"â™Ÿ",n:"â™ž",b:"â™",r:"â™œ",q:"â™›",k:"â™š",P:"â™™",N:"â™˜",B:"â™—",R:"â™–",Q:"â™•",K:"â™”"};function m({board:e,selectedSquare:r,onMove:l}){let[a,s]=(0,n.useState)([["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]]),[i,o]=(0,n.useState)(null),c=e||a,d=void 0!==r?r:i;return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 p-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-8 gap-0 border-4 border-gray-800 rounded-lg overflow-hidden shadow-2xl",children:c.map((e,n)=>e.map((e,a)=>{let i=(n+a)%2==0,m=d&&d[0]===n&&d[1]===a;return(0,t.jsx)("button",{onClick:()=>((e,t)=>{if(d){let[n,r]=d;if(l)l({row:n,col:r},{row:e,col:t})&&o(null);else{let l=c.map(e=>[...e]);l[e][t]=l[n][r],l[n][r]=null,s(l),o(null)}}else c[e][t]&&void 0===r&&o([e,t])})(n,a),className:`
                  w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20
                  flex items-center justify-center
                  text-3xl sm:text-4xl md:text-5xl
                  transition-all duration-150
                  ${i?"bg-amber-100":"bg-amber-700"}
                  ${m?"ring-4 ring-blue-500 ring-inset":""}
                  hover:brightness-110
                  active:brightness-90
                `,children:e&&(0,t.jsx)("span",{className:`
                      ${e===e.toUpperCase()?"text-white":"text-black"}
                      drop-shadow-md
                    `,children:u[e]})},`${n}-${a}`)}))}),(0,t.jsx)("div",{className:"text-sm text-gray-600 text-center",children:d?"Click a square to move":"Click a piece to select"})]})}let g=[["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]];function p(e){return e.charCodeAt(0)-97}function h(e){return 8-parseInt(e)}function x(e){return String.fromCharCode(97+e)}function f(e,t,n){let r=Math.sign(n.row-t.row),l=Math.sign(n.col-t.col),a=t.row+r,s=t.col+l;for(;a!==n.row||s!==n.col;){if(e[a][s])return!1;a+=r,s+=l}return!0}var v=e.i(80447),b=e.i(22153);function N({opening:e,onComplete:l,onQuit:a}){let[s,d]=(0,n.useState)(g),[u,N]=(0,n.useState)(0),[y,w]=(0,n.useState)(null),[j,S]=(0,n.useState)(null),[k,C]=(0,n.useState)(!0),[O,P]=(0,n.useState)(!1),[M,I]=(0,n.useState)({movesPlayed:0,correctMoves:0}),[B,A]=(0,n.useState)(null),[D,R]=(0,n.useState)(0),[L,$]=(0,n.useState)([]),[T,E]=(0,n.useState)([]),q=e.mainLine[u],F=u>=e.mainLine.length;(0,n.useEffect)(()=>{A((0,r.getOpeningProgress)(e.id))},[e.id]),(0,n.useEffect)(()=>{let e=e=>{("r"===e.key||"R"===e.key)&&(e.preventDefault(),X()),("q"===e.key||"Q"===e.key)&&(e.preventDefault(),a?.()),("h"===e.key||"H"===e.key)&&(e.preventDefault(),Q())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[u,q]),(0,n.useEffect)(()=>{if(F){let t=(0,r.recordSession)(e.id,M.movesPlayed,M.correctMoves,!0,e),n=0,a=i(),s=c();if(s?.id!==e.id||a.completed)R(t.xpEarned);else{let e;n=a.xpBonus,(e=i()).completed=!0,o(e);let l=(0,r.getUserStats)();(0,v.getLevelFromXP)(l.totalXP),R(t.xpEarned+n)}$(t.newAchievements),P(!0),setTimeout(()=>{l?.()},3e3)}},[F,l,e.id,e,M]);let Q=()=>{q&&S(`Try ${q}`)},X=()=>{M.movesPlayed>0&&(0,r.recordSession)(e.id,M.movesPlayed,M.correctMoves,!1,e),d(g),N(0),w(null),S(null),C(!0),P(!1),I({movesPlayed:0,correctMoves:0}),R(0),$([]),E([]),A((0,r.getOpeningProgress)(e.id))};if(F&&O){let n=(0,r.getUserStats)(),l=(0,v.getLevelFromXP)(n.totalXP),s=Math.round(M.correctMoves/M.movesPlayed*100);return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6 p-8 min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[(0,t.jsxs)("div",{className:"text-center max-w-2xl",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),(0,t.jsx)("h2",{className:"text-3xl font-bold text-green-600 mb-2",children:"Opening Complete!"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:["You successfully completed the ",e.name]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[s,"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:["+",D]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"XP Earned"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:["Lvl ",l.level]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:(0,v.getLevelTitle)(l.level)})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,t.jsxs)("span",{children:["Level ",l.level]}),(0,t.jsxs)("span",{children:[l.currentXP," / ",l.xpForNextLevel," XP"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500",style:{width:`${l.currentXP/l.xpForNextLevel*100}%`}})})]})]}),L.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"ðŸ† New Achievements!"}),(0,t.jsx)("div",{className:"space-y-3",children:L.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-yellow-50 rounded-lg border-2 border-yellow-300",children:[(0,t.jsx)("span",{className:"text-4xl",children:e.icon}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-bold text-gray-800",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:X,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Practice Again"}),(0,t.jsx)("button",{onClick:a,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Choose Another Opening"})]})]})}return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6 p-4",children:[(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.description}),B&&B.completedCount>0&&(0,t.jsxs)("div",{className:"flex gap-4 mt-2 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["âœ“ Completed ",B.completedCount,"x"]}),(0,t.jsxs)("span",{children:["ðŸ”¥ Streak: ",B.currentStreak]}),(0,t.jsxs)("span",{children:["ðŸ“Š Accuracy: ",B.averageAccuracy,"%"]})]})]}),(0,t.jsx)("span",{className:`
            px-3 py-1 rounded-full text-xs font-semibold uppercase flex-shrink-0
            ${"beginner"===e.difficulty?"bg-green-100 text-green-800":""}
            ${"intermediate"===e.difficulty?"bg-yellow-100 text-yellow-800":""}
            ${"advanced"===e.difficulty?"bg-red-100 text-red-800":""}
          `,children:e.difficulty})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[u," / ",e.mainLine.length," moves"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${u/e.mainLine.length*100}%`}})})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-blue-600 font-semibold mb-1",children:k?"âšª White to move":"âš« Black to move"}),(0,t.jsx)("p",{className:"text-lg font-mono font-bold text-blue-900",children:q})]}),(0,t.jsx)("button",{onClick:Q,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition text-sm",children:"ðŸ’¡ Hint"})]}),j&&(0,t.jsx)("div",{className:"mt-3 pt-3 border-t border-blue-200",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Hint:"})," ",j]})})]})]}),y&&(0,t.jsx)("div",{className:`
          px-6 py-3 rounded-lg font-semibold text-white shadow-lg
          transform transition-all duration-300
          ${"correct"===y?"bg-green-500 scale-105":"bg-red-500 animate-shake"}
        `,children:"correct"===y?"âœ“ Correct!":"âœ— Try again"}),(0,t.jsx)(m,{board:s,onMove:(e,t)=>{let n=function(e,t,n){let r=e[t.row][t.col];if(!r)return null;let l=r.toLowerCase(),a=x(n.col),s=8-n.row;if("k"===l&&2===Math.abs(n.col-t.col))return 6===n.col?"O-O":"O-O-O";let i=e[n.row][n.col],o=i?"x":"";if("p"===l){if(i){let e=x(t.col);return`${e}${o}${a}${s}`}return`${a}${s}`}let c=r.toUpperCase();return`${c}${o}${a}${s}`}(s,e,t);if(!n)return w("incorrect"),setTimeout(()=>w(null),1e3),!1;let r=q.replace(/[+#!?]/g,"");if(n.replace(/[+#!?]/g,"")!==r)return w("incorrect"),(0,b.playSound)("incorrect"),(0,b.triggerHaptic)("error"),I(e=>({...e,movesPlayed:e.movesPlayed+1})),setTimeout(()=>w(null),1e3),!1;{w("correct"),S(null),(0,b.playSound)("correct"),(0,b.triggerHaptic)("success"),I(e=>({movesPlayed:e.movesPlayed+1,correctMoves:e.correctMoves+1})),E(e=>[...e,q]);let e=function(e,t,n){let r=e.trim();if("O-O"===r||"O-O-O"===r){let e=7*!!n,t=n?"K":"k";return"O-O"===r?{from:{row:e,col:4},to:{row:e,col:6},piece:t,algebraic:r}:{from:{row:e,col:4},to:{row:e,col:2},piece:t,algebraic:r}}let l=r.replace(/[+#!?]/g,""),a="P",s=l;/^[NBRQK]/.test(l)&&(a=l[0],s=l.slice(1));let i=n?a:a.toLowerCase(),o=s.includes("x");o&&(s=s.replace("x",""));let c=s[s.length-2],d=s[s.length-1],u=p(c),m=h(d),g=null,x=null;if("P"===a&&3===s.length&&o)g=p(s[0]);else if(s.length>2){let e=s.slice(0,-2);/[a-h]/.test(e[0])&&(g=p(e[0])),/[1-8]/.test(e[e.length-1])&&(x=h(e[e.length-1]))}let v=function(e,t,n,r,l){if(!t)return null;let a=t===t.toUpperCase(),s=t.toLowerCase();for(let t=0;t<8;t++)if(null===r||t===r)for(let r=0;r<8;r++){if(null!==l&&r!==l)continue;let i=e[t][r];if(i?.toLowerCase()===s&&i===i.toUpperCase()===a&&function(e,t,n,r){let l=Math.abs(n.row-t.row),a=Math.abs(n.col-t.col),s=e[t.row][t.col],i=s===s?.toUpperCase();switch(r){case"p":{let r=i?-1:1;if(t.col===n.col&&!e[n.row][n.col]){if(n.row===t.row+r)return!0;if(t.row===(i?6:1)&&n.row===t.row+2*r)return!e[t.row+r][t.col]}if(1===a&&n.row===t.row+r&&e[n.row][n.col])return!0;return!1}case"n":return 2===l&&1===a||1===l&&2===a;case"b":if(l!==a)return!1;return f(e,t,n);case"r":if(t.row!==n.row&&t.col!==n.col)return!1;return f(e,t,n);case"q":if(t.row!==n.row&&t.col!==n.col&&l!==a)return!1;return f(e,t,n);case"k":return l<=1&&a<=1;default:return!1}}(e,{row:t,col:r},n,s))return{row:t,col:r}}return null}(t,i,{row:m,col:u},x,g);return v?{from:v,to:{row:m,col:u},piece:i,captured:t[m][u],algebraic:r}:null}(q,s,k);return e&&(d(function(e,t){let n=e.map(e=>[...e]);if("O-O"===t.algebraic){let e=t.from.row,r="K"===t.piece;return n[e][6]=t.piece,n[e][4]=null,n[e][5]=r?"R":"r",n[e][7]=null,n}if("O-O-O"===t.algebraic){let e=t.from.row,r="K"===t.piece;return n[e][2]=t.piece,n[e][4]=null,n[e][3]=r?"R":"r",n[e][0]=null,n}return n[t.to.row][t.to.col]=t.piece,n[t.from.row][t.from.col]=null,n}(s,e)),C(!k),N(u+1),setTimeout(()=>w(null),800)),!0}},selectedSquare:null}),(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"Move History"}),(0,t.jsx)("div",{className:"font-mono bg-gray-50 p-4 rounded border border-gray-200 min-h-12",children:T.length>0?(0,t.jsx)("div",{className:"space-y-2",children:T.map((e,n)=>{let r=Math.floor(n/2)+1;return(0,t.jsxs)("div",{children:[n%2==0&&(0,t.jsxs)("span",{className:"font-bold text-gray-700",children:[r,"."]}),(0,t.jsx)("span",{className:"mx-2 text-gray-800",children:e})]},n)})}):(0,t.jsx)("div",{className:"text-gray-400 text-sm",children:"Make your first move..."})})]}),(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"Key Ideas"}),(0,t.jsx)("ul",{className:"space-y-2",children:e.keyIdeas.map((e,n)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-gray-700",children:[(0,t.jsx)("span",{className:"text-blue-600 mt-1",children:"â€¢"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},n))})]}),(0,t.jsxs)("div",{className:"flex gap-4 flex-wrap justify-center",children:[(0,t.jsx)("button",{onClick:X,className:"px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",title:"Press R",children:"Reset (R)"}),(0,t.jsx)("button",{onClick:a,className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",title:"Press Q",children:"Quit (Q)"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 self-center px-4",children:["ðŸ’¡ Shortcut: Press ",(0,t.jsx)("kbd",{children:"H"})," for hint"]})]})]})}function y(){let[e,r]=(0,n.useState)(null);return e?(0,t.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-700",children:(0,t.jsx)(N,{opening:e,onComplete:()=>{r(null)},onQuit:()=>r(null)})}):(0,t.jsx)(d,{openings:a.openings,onSelect:r})}e.s(["default",()=>y],31713)}]);
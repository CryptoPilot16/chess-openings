(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56563,30800,80447,e=>{"use strict";function t(e,t){let r;if(e<3)return{...t,interval:1,repetitions:0,easeFactor:Math.max(1.3,t.easeFactor-.2),lastReview:new Date().toISOString(),nextReview:s(1).toISOString()};let l=t.repetitions+1;r=1===l?1:2===l?6:Math.round(t.interval*t.easeFactor);let n=Math.max(1.3,Math.min(2.5,t.easeFactor+(.1-(5-e)*(.08+(5-e)*.02))));return{...t,interval:r,repetitions:l,easeFactor:n,lastReview:new Date().toISOString(),nextReview:s(r).toISOString()}}function r(e){return{openingId:e,easeFactor:2.5,interval:1,repetitions:0,nextReview:s(1).toISOString(),lastReview:new Date().toISOString()}}function l(e){return new Date>=new Date(e.nextReview)}function n(e){return e>=95?5:e>=85?4:e>=75?3:e>=60?2:+(e>=40)}function s(e){let t=new Date;return t.setDate(t.getDate()+e),t}function a(e){let t,r=(t=new Date,Math.ceil((new Date(e.nextReview).getTime()-t.getTime())/864e5));return r<0?"Overdue!":0===r?"Due today":1===r?"Due tomorrow":r<7?`Due in ${r} days`:r<30?`Due in ${Math.round(r/7)} weeks`:`Due in ${Math.round(r/30)} months`}function o(e){let t=1,r=0;for(;;){let l=Math.floor(100*Math.pow(1.5,t-1));if(r+l>e)return{level:t,currentXP:e-r,xpForNextLevel:l,totalXP:e};r+=l,t++}}function i(e,t,r,l){if(!r)return 0;let n=t/e,s=0;return n>=.95?s=50:n>=.85?s=30:n>=.75&&(s=15),Math.floor((50+s)*({beginner:1,intermediate:1.5,advanced:2})[l])}e.s(["accuracyToQuality",()=>n,"calculateNextReview",()=>t,"createReviewCard",()=>r,"getReviewScheduleText",()=>a,"isDueForReview",()=>l],30800);let c=[{id:"first-opening",name:"First Steps",description:"Complete your first opening",emoji:"ðŸŽ¯",target:1},{id:"five-openings",name:"Opening Explorer",description:"Complete 5 different openings",emoji:"ðŸ—ºï¸",target:5},{id:"perfect-run",name:"Perfectionist",description:"Complete an opening with 100% accuracy",emoji:"ðŸ’Ž",target:1},{id:"streak-5",name:"On Fire",description:"Maintain a 5-session streak",emoji:"ðŸ”¥",target:5},{id:"streak-10",name:"Unstoppable",description:"Maintain a 10-session streak",emoji:"âš¡",target:10},{id:"advanced-master",name:"Grandmaster",description:"Complete all advanced openings",emoji:"ðŸ‘‘",target:1},{id:"speed-demon",name:"Speed Demon",description:"Complete an opening in under 2 minutes",emoji:"ðŸš€",target:1},{id:"level-5",name:"Apprentice",description:"Reach level 5",emoji:"â­",target:5},{id:"level-10",name:"Expert",description:"Reach level 10",emoji:"ðŸŒŸ",target:10},{id:"level-20",name:"Master",description:"Reach level 20",emoji:"âœ¨",target:20}];function u(e,t,r){let l=[],n=new Date().toISOString();for(let e of c){let s=r.find(t=>t.id===e.id);if(s?.unlockedAt)continue;let a=!1;switch(e.id){case"first-opening":t.totalCompletions,a=(t.totalCompletions||0)>=1;break;case"five-openings":t.uniqueOpeningsCompleted,a=(t.uniqueOpeningsCompleted||0)>=5;break;case"perfect-run":a=(t.perfectRuns||0)>=1;break;case"streak-5":t.currentStreak,a=(t.currentStreak||0)>=5;break;case"streak-10":t.currentStreak,a=(t.currentStreak||0)>=10;break;case"level-5":let i=o(t.totalXP||0);i.level,a=i.level>=5;break;case"level-10":let c=o(t.totalXP||0);c.level,a=c.level>=10;break;case"level-20":let u=o(t.totalXP||0);u.level,a=u.level>=20;break;default:continue}a&&l.push({...e,progress:100,unlockedAt:n})}return l}function d(e){return e<5?"Novice":e<10?"Apprentice":e<15?"Intermediate":e<20?"Advanced":e<30?"Expert":e<50?"Master":"Grandmaster"}e.s(["ACHIEVEMENTS",0,c,"calculateXPReward",()=>i,"checkAchievements",()=>u,"getLevelFromXP",()=>o,"getLevelTitle",()=>d],80447);let g="chess-trainer-openings",m="chess-trainer-stats",p="chess-trainer-reviews",x="chess-trainer-achievements";function h(e){try{let t=localStorage.getItem(g);if(!t)return null;return JSON.parse(t)[e]||null}catch(e){return console.error("Error reading opening progress:",e),null}}function f(e,t){try{let r=localStorage.getItem(g),l=r?JSON.parse(r):{},n=l[e]||{openingId:e,completedCount:0,lastPracticed:new Date().toISOString(),bestStreak:0,currentStreak:0,averageAccuracy:0,totalMoves:0,correctMoves:0};l[e]={...n,...t,lastPracticed:new Date().toISOString()},l[e].totalMoves>0&&(l[e].averageAccuracy=Math.round(l[e].correctMoves/l[e].totalMoves*100)),localStorage.setItem(g,JSON.stringify(l))}catch(e){console.error("Error saving opening progress:",e)}}function v(){try{let e=localStorage.getItem(g);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading all opening progress:",e),{}}}function b(){let e={totalSessions:0,totalMovesPlayed:0,correctMovesTotal:0,startedAt:new Date().toISOString(),lastActive:new Date().toISOString(),totalXP:0,totalCompletions:0,uniqueOpeningsCompleted:0,perfectRuns:0,currentStreak:0,bestStreak:0};try{let t=localStorage.getItem(m);if(!t)return localStorage.setItem(m,JSON.stringify(e)),e;let r=JSON.parse(t);return{...e,...r}}catch(t){return console.error("Error reading user stats:",t),e}}function w(e){try{let t={...b(),...e,lastActive:new Date().toISOString()};localStorage.setItem(m,JSON.stringify(t))}catch(e){console.error("Error saving user stats:",e)}}function y(e,l,s,a,o){let c=b(),d=h(e),g=l>0?s/l*100:0,m=100===g,p=0;a&&o&&(p=i(l,s,!0,o.difficulty)),d?.completedCount;let x=a?(d?.currentStreak||0)+1:0;if(f(e,{completedCount:(d?.completedCount||0)+ +!!a,currentStreak:x,bestStreak:Math.max(x,d?.bestStreak||0),totalMoves:(d?.totalMoves||0)+l,correctMoves:(d?.correctMoves||0)+s}),a){let l=S(e);l||(l=r(e)),j(t(n(g),l))}let y=Object.values(v()).filter(e=>e.completedCount>0).length,N={...c},k=a?c.currentStreak+1:0;w({totalSessions:c.totalSessions+1,totalMovesPlayed:c.totalMovesPlayed+l,correctMovesTotal:c.correctMovesTotal+s,totalXP:c.totalXP+p,totalCompletions:c.totalCompletions+ +!!a,uniqueOpeningsCompleted:y,perfectRuns:c.perfectRuns+(m&&a?1:0),currentStreak:k,bestStreak:Math.max(k,c.bestStreak)});let C=b(),M=O(),I=u(N,C,M);return I.length>0&&P([...M,...I]),{xpEarned:p,newAchievements:I}}function S(e){try{let t=localStorage.getItem(p);if(!t)return null;return JSON.parse(t)[e]||null}catch(e){return console.error("Error reading review card:",e),null}}function j(e){try{let t=localStorage.getItem(p),r=t?JSON.parse(t):{};r[e.openingId]=e,localStorage.setItem(p,JSON.stringify(r))}catch(e){console.error("Error saving review card:",e)}}function N(){try{let e=localStorage.getItem(p);if(!e)return[];let t=JSON.parse(e);return Object.values(t)}catch(e){return console.error("Error reading review cards:",e),[]}}function k(){return N().filter(l).map(e=>e.openingId)}function O(){try{let e=localStorage.getItem(x);if(!e)return[];return JSON.parse(e)}catch(e){return console.error("Error reading achievements:",e),[]}}function P(e){try{localStorage.setItem(x,JSON.stringify(e))}catch(e){console.error("Error saving achievements:",e)}}e.s(["getAchievements",()=>O,"getAllOpeningProgress",()=>v,"getAllReviewCards",()=>N,"getDueOpenings",()=>k,"getOpeningProgress",()=>h,"getReviewCard",()=>S,"getUserStats",()=>b,"recordSession",()=>y,"saveAchievements",()=>P,"updateOpeningProgress",()=>f,"updateReviewCard",()=>j,"updateUserStats",()=>w],56563)},88737,e=>{"use strict";var t=e.i(30315);let r="chess-trainer-daily-challenge";function l(){let e=new Date().toISOString().split("T")[0];try{let t=localStorage.getItem(r);if(t){let r=JSON.parse(t);if(r.date===e)return r}}catch(e){console.error("Error reading daily challenge:",e)}let l=Math.floor(new Date(e).getTime()/864e5)%t.openings.length,s={date:e,openingId:t.openings[l].id,attempts:3,completed:!1,xpBonus:100};return n(s),s}function n(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(e){console.error("Error saving daily challenge:",e)}}function s(){let e=l();e.completed=!0,n(e)}function a(){let e=l();return t.openings.find(t=>t.id===e.openingId)}e.s(["completeDailyChallenge",()=>s,"getDailyChallenge",()=>l,"getDailyChallengeOpening",()=>a])},42463,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let l={p:"â™Ÿ",n:"â™ž",b:"â™",r:"â™œ",q:"â™›",k:"â™š",P:"â™™",N:"â™˜",B:"â™—",R:"â™–",Q:"â™•",K:"â™”"};function n({board:e,selectedSquare:n,onMove:s}){let[a,o]=(0,r.useState)([["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]]),[i,c]=(0,r.useState)(null),u=e||a,d=void 0!==n?n:i;return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 p-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-8 gap-0 border-4 border-gray-800 rounded-lg overflow-hidden shadow-2xl",children:u.map((e,r)=>e.map((e,a)=>{let i=(r+a)%2==0,g=d&&d[0]===r&&d[1]===a;return(0,t.jsx)("button",{onClick:()=>((e,t)=>{if(d){let[r,l]=d;if(s)s({row:r,col:l},{row:e,col:t})&&c(null);else{let n=u.map(e=>[...e]);n[e][t]=n[r][l],n[r][l]=null,o(n),c(null)}}else u[e][t]&&void 0===n&&c([e,t])})(r,a),className:`
                  w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20
                  flex items-center justify-center
                  text-3xl sm:text-4xl md:text-5xl
                  transition-all duration-150
                  ${i?"bg-amber-100":"bg-amber-700"}
                  ${g?"ring-4 ring-blue-500 ring-inset":""}
                  hover:brightness-110
                  active:brightness-90
                `,children:e&&(0,t.jsx)("span",{className:`
                      ${e===e.toUpperCase()?"text-white":"text-black"}
                      drop-shadow-md
                    `,children:l[e]})},`${r}-${a}`)}))}),(0,t.jsx)("div",{className:"text-sm text-gray-600 text-center",children:d?"Click a square to move":"Click a piece to select"})]})}let s=[["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]];function a(e){return e.charCodeAt(0)-97}function o(e){return 8-parseInt(e)}function i(e){return String.fromCharCode(97+e)}function c(e,t,r){let l=Math.sign(r.row-t.row),n=Math.sign(r.col-t.col),s=t.row+l,a=t.col+n;for(;s!==r.row||a!==r.col;){if(e[s][a])return!1;s+=l,a+=n}return!0}var u=e.i(56563),d=e.i(80447),g=e.i(88737),m=e.i(22153);function p({opening:e,onComplete:l,onQuit:p}){let[x,h]=(0,r.useState)(s),[f,v]=(0,r.useState)(0),[b,w]=(0,r.useState)(null),[y,S]=(0,r.useState)(null),[j,N]=(0,r.useState)(!0),[k,O]=(0,r.useState)(!1),[P,C]=(0,r.useState)({movesPlayed:0,correctMoves:0}),[M,I]=(0,r.useState)(null),[R,D]=(0,r.useState)(0),[A,E]=(0,r.useState)([]),[$,T]=(0,r.useState)([]),L=e.mainLine[f],X=f>=e.mainLine.length;(0,r.useEffect)(()=>{I((0,u.getOpeningProgress)(e.id))},[e.id]),(0,r.useEffect)(()=>{let e=e=>{("r"===e.key||"R"===e.key)&&(e.preventDefault(),J()),("q"===e.key||"Q"===e.key)&&(e.preventDefault(),p?.()),("h"===e.key||"H"===e.key)&&(e.preventDefault(),F())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,L]),(0,r.useEffect)(()=>{if(X){let t=(0,u.recordSession)(e.id,P.movesPlayed,P.correctMoves,!0,e),r=0,n=(0,g.getDailyChallenge)(),s=(0,g.getDailyChallengeOpening)();if(s?.id!==e.id||n.completed)D(t.xpEarned);else{r=n.xpBonus,(0,g.completeDailyChallenge)();let e=(0,u.getUserStats)();(0,d.getLevelFromXP)(e.totalXP),D(t.xpEarned+r)}E(t.newAchievements),O(!0),setTimeout(()=>{l?.()},3e3)}},[X,l,e.id,e,P]);let F=()=>{L&&S(`Try ${L}`)},J=()=>{P.movesPlayed>0&&(0,u.recordSession)(e.id,P.movesPlayed,P.correctMoves,!1,e),h(s),v(0),w(null),S(null),N(!0),O(!1),C({movesPlayed:0,correctMoves:0}),D(0),E([]),T([]),I((0,u.getOpeningProgress)(e.id))};if(X&&k){let r=(0,u.getUserStats)(),l=(0,d.getLevelFromXP)(r.totalXP),n=Math.round(P.correctMoves/P.movesPlayed*100);return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6 p-8 min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[(0,t.jsxs)("div",{className:"text-center max-w-2xl",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),(0,t.jsx)("h2",{className:"text-3xl font-bold text-green-600 mb-2",children:"Opening Complete!"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:["You successfully completed the ",e.name]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[n,"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:["+",R]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"XP Earned"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:["Lvl ",l.level]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:(0,d.getLevelTitle)(l.level)})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,t.jsxs)("span",{children:["Level ",l.level]}),(0,t.jsxs)("span",{children:[l.currentXP," / ",l.xpForNextLevel," XP"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500",style:{width:`${l.currentXP/l.xpForNextLevel*100}%`}})})]})]}),A.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"ðŸ† New Achievements!"}),(0,t.jsx)("div",{className:"space-y-3",children:A.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-yellow-50 rounded-lg border-2 border-yellow-300",children:[(0,t.jsx)("span",{className:"text-4xl",children:e.icon}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-bold text-gray-800",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:J,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Practice Again"}),(0,t.jsx)("button",{onClick:p,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Choose Another Opening"})]})]})}return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6 p-4",children:[(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.description}),M&&M.completedCount>0&&(0,t.jsxs)("div",{className:"flex gap-4 mt-2 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["âœ“ Completed ",M.completedCount,"x"]}),(0,t.jsxs)("span",{children:["ðŸ”¥ Streak: ",M.currentStreak]}),(0,t.jsxs)("span",{children:["ðŸ“Š Accuracy: ",M.averageAccuracy,"%"]})]})]}),(0,t.jsx)("span",{className:`
            px-3 py-1 rounded-full text-xs font-semibold uppercase flex-shrink-0
            ${"beginner"===e.difficulty?"bg-green-100 text-green-800":""}
            ${"intermediate"===e.difficulty?"bg-yellow-100 text-yellow-800":""}
            ${"advanced"===e.difficulty?"bg-red-100 text-red-800":""}
          `,children:e.difficulty})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[f," / ",e.mainLine.length," moves"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${f/e.mainLine.length*100}%`}})})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-blue-600 font-semibold mb-1",children:j?"âšª White to move":"âš« Black to move"}),(0,t.jsx)("p",{className:"text-lg font-mono font-bold text-blue-900",children:L})]}),(0,t.jsx)("button",{onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition text-sm",children:"ðŸ’¡ Hint"})]}),y&&(0,t.jsx)("div",{className:"mt-3 pt-3 border-t border-blue-200",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Hint:"})," ",y]})})]})]}),b&&(0,t.jsx)("div",{className:`
          px-6 py-3 rounded-lg font-semibold text-white shadow-lg
          transform transition-all duration-300
          ${"correct"===b?"bg-green-500 scale-105":"bg-red-500 animate-shake"}
        `,children:"correct"===b?"âœ“ Correct!":"âœ— Try again"}),(0,t.jsx)(n,{board:x,onMove:(e,t)=>{let r=function(e,t,r){let l=e[t.row][t.col];if(!l)return null;let n=l.toLowerCase(),s=i(r.col),a=8-r.row;if("k"===n&&2===Math.abs(r.col-t.col))return 6===r.col?"O-O":"O-O-O";let o=e[r.row][r.col],c=o?"x":"";if("p"===n){if(o){let e=i(t.col);return`${e}${c}${s}${a}`}return`${s}${a}`}let u=l.toUpperCase();return`${u}${c}${s}${a}`}(x,e,t);if(!r)return w("incorrect"),setTimeout(()=>w(null),1e3),!1;let l=L.replace(/[+#!?]/g,"");if(r.replace(/[+#!?]/g,"")!==l)return w("incorrect"),(0,m.playSound)("incorrect"),(0,m.triggerHaptic)("error"),C(e=>({...e,movesPlayed:e.movesPlayed+1})),setTimeout(()=>w(null),1e3),!1;{w("correct"),S(null),(0,m.playSound)("correct"),(0,m.triggerHaptic)("success"),C(e=>({movesPlayed:e.movesPlayed+1,correctMoves:e.correctMoves+1})),T(e=>[...e,L]);let e=function(e,t,r){let l=e.trim();if("O-O"===l||"O-O-O"===l){let e=7*!!r,t=r?"K":"k";return"O-O"===l?{from:{row:e,col:4},to:{row:e,col:6},piece:t,algebraic:l}:{from:{row:e,col:4},to:{row:e,col:2},piece:t,algebraic:l}}let n=l.replace(/[+#!?]/g,""),s="P",i=n;/^[NBRQK]/.test(n)&&(s=n[0],i=n.slice(1));let u=r?s:s.toLowerCase(),d=i.includes("x");d&&(i=i.replace("x",""));let g=i[i.length-2],m=i[i.length-1],p=a(g),x=o(m),h=null,f=null;if("P"===s&&3===i.length&&d)h=a(i[0]);else if(i.length>2){let e=i.slice(0,-2);/[a-h]/.test(e[0])&&(h=a(e[0])),/[1-8]/.test(e[e.length-1])&&(f=o(e[e.length-1]))}let v=function(e,t,r,l,n){if(!t)return null;let s=t===t.toUpperCase(),a=t.toLowerCase();for(let t=0;t<8;t++)if(null===l||t===l)for(let l=0;l<8;l++){if(null!==n&&l!==n)continue;let o=e[t][l];if(o?.toLowerCase()===a&&o===o.toUpperCase()===s&&function(e,t,r,l){let n=Math.abs(r.row-t.row),s=Math.abs(r.col-t.col),a=e[t.row][t.col],o=a===a?.toUpperCase();switch(l){case"p":{let l=o?-1:1;if(t.col===r.col&&!e[r.row][r.col]){if(r.row===t.row+l)return!0;if(t.row===(o?6:1)&&r.row===t.row+2*l)return!e[t.row+l][t.col]}if(1===s&&r.row===t.row+l&&e[r.row][r.col])return!0;return!1}case"n":return 2===n&&1===s||1===n&&2===s;case"b":if(n!==s)return!1;return c(e,t,r);case"r":if(t.row!==r.row&&t.col!==r.col)return!1;return c(e,t,r);case"q":if(t.row!==r.row&&t.col!==r.col&&n!==s)return!1;return c(e,t,r);case"k":return n<=1&&s<=1;default:return!1}}(e,{row:t,col:l},r,a))return{row:t,col:l}}return null}(t,u,{row:x,col:p},f,h);return v?{from:v,to:{row:x,col:p},piece:u,captured:t[x][p],algebraic:l}:null}(L,x,j);return e&&(h(function(e,t){let r=e.map(e=>[...e]);if("O-O"===t.algebraic){let e=t.from.row,l="K"===t.piece;return r[e][6]=t.piece,r[e][4]=null,r[e][5]=l?"R":"r",r[e][7]=null,r}if("O-O-O"===t.algebraic){let e=t.from.row,l="K"===t.piece;return r[e][2]=t.piece,r[e][4]=null,r[e][3]=l?"R":"r",r[e][0]=null,r}return r[t.to.row][t.to.col]=t.piece,r[t.from.row][t.from.col]=null,r}(x,e)),N(!j),v(f+1),setTimeout(()=>w(null),800)),!0}},selectedSquare:null}),(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"Move History"}),(0,t.jsx)("div",{className:"font-mono bg-gray-50 p-4 rounded border border-gray-200 min-h-12",children:$.length>0?(0,t.jsx)("div",{className:"space-y-2",children:$.map((e,r)=>{let l=Math.floor(r/2)+1;return(0,t.jsxs)("div",{children:[r%2==0&&(0,t.jsxs)("span",{className:"font-bold text-gray-700",children:[l,"."]}),(0,t.jsx)("span",{className:"mx-2 text-gray-800",children:e})]},r)})}):(0,t.jsx)("div",{className:"text-gray-400 text-sm",children:"Make your first move..."})})]}),(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"Key Ideas"}),(0,t.jsx)("ul",{className:"space-y-2",children:e.keyIdeas.map((e,r)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-gray-700",children:[(0,t.jsx)("span",{className:"text-blue-600 mt-1",children:"â€¢"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},r))})]}),(0,t.jsxs)("div",{className:"flex gap-4 flex-wrap justify-center",children:[(0,t.jsx)("button",{onClick:J,className:"px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",title:"Press R",children:"Reset (R)"}),(0,t.jsx)("button",{onClick:p,className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",title:"Press Q",children:"Quit (Q)"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 self-center px-4",children:["ðŸ’¡ Shortcut: Press ",(0,t.jsx)("kbd",{children:"H"})," for hint"]})]})]})}e.s(["default",()=>p],42463)},56379,e=>{e.n(e.i(42463))}]);
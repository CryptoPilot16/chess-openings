(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56563,30800,80447,e=>{"use strict";function t(e,t){let r;if(e<3)return{...t,interval:1,repetitions:0,easeFactor:Math.max(1.3,t.easeFactor-.2),lastReview:new Date().toISOString(),nextReview:n(1).toISOString()};let a=t.repetitions+1;r=1===a?1:2===a?6:Math.round(t.interval*t.easeFactor);let s=Math.max(1.3,Math.min(2.5,t.easeFactor+(.1-(5-e)*(.08+(5-e)*.02))));return{...t,interval:r,repetitions:a,easeFactor:s,lastReview:new Date().toISOString(),nextReview:n(r).toISOString()}}function r(e){return{openingId:e,easeFactor:2.5,interval:1,repetitions:0,nextReview:n(1).toISOString(),lastReview:new Date().toISOString()}}function a(e){return new Date>=new Date(e.nextReview)}function s(e){return e>=95?5:e>=85?4:e>=75?3:e>=60?2:+(e>=40)}function n(e){let t=new Date;return t.setDate(t.getDate()+e),t}function o(e){let t,r=(t=new Date,Math.ceil((new Date(e.nextReview).getTime()-t.getTime())/864e5));return r<0?"Overdue!":0===r?"Due today":1===r?"Due tomorrow":r<7?`Due in ${r} days`:r<30?`Due in ${Math.round(r/7)} weeks`:`Due in ${Math.round(r/30)} months`}function l(e){let t=1,r=0;for(;;){let a=Math.floor(100*Math.pow(1.5,t-1));if(r+a>e)return{level:t,currentXP:e-r,xpForNextLevel:a,totalXP:e};r+=a,t++}}function i(e,t,r,a){if(!r)return 0;let s=t/e,n=0;return s>=.95?n=50:s>=.85?n=30:s>=.75&&(n=15),Math.floor((50+n)*({beginner:1,intermediate:1.5,advanced:2})[a])}e.s(["accuracyToQuality",()=>s,"calculateNextReview",()=>t,"createReviewCard",()=>r,"getReviewScheduleText",()=>o,"isDueForReview",()=>a],30800);let c=[{id:"first-opening",name:"First Steps",description:"Complete your first opening",emoji:"ðŸŽ¯",target:1},{id:"five-openings",name:"Opening Explorer",description:"Complete 5 different openings",emoji:"ðŸ—ºï¸",target:5},{id:"perfect-run",name:"Perfectionist",description:"Complete an opening with 100% accuracy",emoji:"ðŸ’Ž",target:1},{id:"streak-5",name:"On Fire",description:"Maintain a 5-session streak",emoji:"ðŸ”¥",target:5},{id:"streak-10",name:"Unstoppable",description:"Maintain a 10-session streak",emoji:"âš¡",target:10},{id:"advanced-master",name:"Grandmaster",description:"Complete all advanced openings",emoji:"ðŸ‘‘",target:1},{id:"speed-demon",name:"Speed Demon",description:"Complete an opening in under 2 minutes",emoji:"ðŸš€",target:1},{id:"level-5",name:"Apprentice",description:"Reach level 5",emoji:"â­",target:5},{id:"level-10",name:"Expert",description:"Reach level 10",emoji:"ðŸŒŸ",target:10},{id:"level-20",name:"Master",description:"Reach level 20",emoji:"âœ¨",target:20}];function d(e,t,r){let a=[],s=new Date().toISOString();for(let e of c){let n=r.find(t=>t.id===e.id);if(n?.unlockedAt)continue;let o=!1;switch(e.id){case"first-opening":t.totalCompletions,o=(t.totalCompletions||0)>=1;break;case"five-openings":t.uniqueOpeningsCompleted,o=(t.uniqueOpeningsCompleted||0)>=5;break;case"perfect-run":o=(t.perfectRuns||0)>=1;break;case"streak-5":t.currentStreak,o=(t.currentStreak||0)>=5;break;case"streak-10":t.currentStreak,o=(t.currentStreak||0)>=10;break;case"level-5":let i=l(t.totalXP||0);i.level,o=i.level>=5;break;case"level-10":let c=l(t.totalXP||0);c.level,o=c.level>=10;break;case"level-20":let d=l(t.totalXP||0);d.level,o=d.level>=20;break;default:continue}o&&a.push({...e,progress:100,unlockedAt:s})}return a}function u(e){return e<5?"Novice":e<10?"Apprentice":e<15?"Intermediate":e<20?"Advanced":e<30?"Expert":e<50?"Master":"Grandmaster"}e.s(["ACHIEVEMENTS",0,c,"calculateXPReward",()=>i,"checkAchievements",()=>d,"getLevelFromXP",()=>l,"getLevelTitle",()=>u],80447);let g="chess-trainer-openings",m="chess-trainer-stats",p="chess-trainer-reviews",f="chess-trainer-achievements";function h(e){try{let t=localStorage.getItem(g);if(!t)return null;return JSON.parse(t)[e]||null}catch(e){return console.error("Error reading opening progress:",e),null}}function x(e,t){try{let r=localStorage.getItem(g),a=r?JSON.parse(r):{},s=a[e]||{openingId:e,completedCount:0,lastPracticed:new Date().toISOString(),bestStreak:0,currentStreak:0,averageAccuracy:0,totalMoves:0,correctMoves:0};a[e]={...s,...t,lastPracticed:new Date().toISOString()},a[e].totalMoves>0&&(a[e].averageAccuracy=Math.round(a[e].correctMoves/a[e].totalMoves*100)),localStorage.setItem(g,JSON.stringify(a))}catch(e){console.error("Error saving opening progress:",e)}}function v(){try{let e=localStorage.getItem(g);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading all opening progress:",e),{}}}function b(){let e={totalSessions:0,totalMovesPlayed:0,correctMovesTotal:0,startedAt:new Date().toISOString(),lastActive:new Date().toISOString(),totalXP:0,totalCompletions:0,uniqueOpeningsCompleted:0,perfectRuns:0,currentStreak:0,bestStreak:0};try{let t=localStorage.getItem(m);if(!t)return localStorage.setItem(m,JSON.stringify(e)),e;let r=JSON.parse(t);return{...e,...r}}catch(t){return console.error("Error reading user stats:",t),e}}function k(e){try{let t={...b(),...e,lastActive:new Date().toISOString()};localStorage.setItem(m,JSON.stringify(t))}catch(e){console.error("Error saving user stats:",e)}}function N(e,a,n,o,l){let c=b(),u=h(e),g=a>0?n/a*100:0,m=100===g,p=0;o&&l&&(p=i(a,n,!0,l.difficulty)),u?.completedCount;let f=o?(u?.currentStreak||0)+1:0;if(x(e,{completedCount:(u?.completedCount||0)+ +!!o,currentStreak:f,bestStreak:Math.max(f,u?.bestStreak||0),totalMoves:(u?.totalMoves||0)+a,correctMoves:(u?.correctMoves||0)+n}),o){let a=w(e);a||(a=r(e)),S(t(s(g),a))}let N=Object.values(v()).filter(e=>e.completedCount>0).length,y={...c},j=o?c.currentStreak+1:0;k({totalSessions:c.totalSessions+1,totalMovesPlayed:c.totalMovesPlayed+a,correctMovesTotal:c.correctMovesTotal+n,totalXP:c.totalXP+p,totalCompletions:c.totalCompletions+ +!!o,uniqueOpeningsCompleted:N,perfectRuns:c.perfectRuns+(m&&o?1:0),currentStreak:j,bestStreak:Math.max(j,c.bestStreak)});let M=b(),I=O(),P=d(y,M,I);return P.length>0&&C([...I,...P]),{xpEarned:p,newAchievements:P}}function w(e){try{let t=localStorage.getItem(p);if(!t)return null;return JSON.parse(t)[e]||null}catch(e){return console.error("Error reading review card:",e),null}}function S(e){try{let t=localStorage.getItem(p),r=t?JSON.parse(t):{};r[e.openingId]=e,localStorage.setItem(p,JSON.stringify(r))}catch(e){console.error("Error saving review card:",e)}}function y(){try{let e=localStorage.getItem(p);if(!e)return[];let t=JSON.parse(e);return Object.values(t)}catch(e){return console.error("Error reading review cards:",e),[]}}function j(){return y().filter(a).map(e=>e.openingId)}function O(){try{let e=localStorage.getItem(f);if(!e)return[];return JSON.parse(e)}catch(e){return console.error("Error reading achievements:",e),[]}}function C(e){try{localStorage.setItem(f,JSON.stringify(e))}catch(e){console.error("Error saving achievements:",e)}}e.s(["getAchievements",()=>O,"getAllOpeningProgress",()=>v,"getAllReviewCards",()=>y,"getDueOpenings",()=>j,"getOpeningProgress",()=>h,"getReviewCard",()=>w,"getUserStats",()=>b,"recordSession",()=>N,"saveAchievements",()=>C,"updateOpeningProgress",()=>x,"updateReviewCard",()=>S,"updateUserStats",()=>k],56563)},30315,e=>{"use strict";e.s(["openings",0,[{id:"italian-game",name:"Italian Game",description:"One of the oldest recorded openings, focusing on quick development and control of the center.",difficulty:"beginner",mainLine:["e4","e5","Nf3","Nc6","Bc4","Bc5","c3","d6","d4"],keyIdeas:["Control the center with pawns","Develop pieces quickly (knights before bishops)","Castle kingside early for safety","Attack the weak f7 square","Build a strong pawn center with c3 and d4"],variations:[{name:"Giuoco Piano",moves:["e4","e5","Nf3","Nc6","Bc4","Bc5","c3"]},{name:"Two Knights Defense",moves:["e4","e5","Nf3","Nc6","Bc4","Nf6"]}]},{id:"sicilian-defense",name:"Sicilian Defense",description:"The most popular and aggressive response to 1.e4, leading to asymmetrical positions.",difficulty:"intermediate",mainLine:["e4","c5","Nf3","d6","d4","cxd4","Nxd4","Nf6","Nc3"],keyIdeas:["Fight for central control with c5 instead of e5","Create asymmetrical pawn structures","Counterattack on the queenside","Maintain tension in the center","Accept complex tactical positions"],variations:[{name:"Najdorf Variation",moves:["e4","c5","Nf3","d6","d4","cxd4","Nxd4","Nf6","Nc3","a6"]},{name:"Dragon Variation",moves:["e4","c5","Nf3","d6","d4","cxd4","Nxd4","Nf6","Nc3","g6"]}]},{id:"french-defense",name:"French Defense",description:"A solid defense creating a strong pawn chain, though temporarily restricting the c8 bishop.",difficulty:"intermediate",mainLine:["e4","e6","d4","d5","Nc3","Nf6","Bg5"],keyIdeas:["Create a solid pawn structure with e6 and d5","Challenge white's center immediately","Plan to break with ...c5 or ...f6","Accept a temporarily passive c8 bishop","Counterattack on the queenside"],variations:[{name:"Winawer Variation",moves:["e4","e6","d4","d5","Nc3","Bb4"]},{name:"Tarrasch Variation",moves:["e4","e6","d4","d5","Nd2"]}]},{id:"queens-gambit",name:"Queen's Gambit",description:"A classical opening where White offers a pawn to gain central control and faster development.",difficulty:"intermediate",mainLine:["d4","d5","c4","e6","Nc3","Nf6","Bg5"],keyIdeas:["Offer the c4 pawn to challenge Black's center","Control the center with pieces after ...dxc4","Develop smoothly with Nc3, Nf3, and Bg5","Put pressure on Black's position","Maintain central control"],variations:[{name:"Queen's Gambit Declined",moves:["d4","d5","c4","e6","Nc3","Nf6"]},{name:"Queen's Gambit Accepted",moves:["d4","d5","c4","dxc4"]}]},{id:"ruy-lopez",name:"Ruy LÃ³pez",description:"Also known as the Spanish Opening, this classical opening puts immediate pressure on e5.",difficulty:"advanced",mainLine:["e4","e5","Nf3","Nc6","Bb5","a6","Ba4","Nf6","O-O"],keyIdeas:["Put pressure on the e5 pawn immediately","Develop pieces harmoniously","Maintain flexibility with the light-squared bishop","Castle kingside quickly","Build a strong center"],variations:[{name:"Berlin Defense",moves:["e4","e5","Nf3","Nc6","Bb5","Nf6"]},{name:"Marshall Attack",moves:["e4","e5","Nf3","Nc6","Bb5","a6","Ba4","Nf6","O-O","Be7","Re1","b5","Bb3","O-O","d4","d5"]}]}]])},18040,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(56563),s=e.i(30315),n=e.i(80447),o=e.i(22016);function l(){let[e,l]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{c(!0),l((0,a.getUserStats)())},[]);let g=async e=>{let t=e.target.files?.[0];if(!t)return;let r=await new Promise(e=>{let r=new FileReader;r.onload=t=>{try{let r=JSON.parse(t.target?.result),s=function(e){try{if("1.0"!==e.version)return{success:!1,message:"Invalid or unsupported backup version"};return Object.entries(e.openingProgress).forEach(([e,t])=>{(0,a.updateOpeningProgress)(e,t)}),(0,a.updateUserStats)(e.userStats),Object.entries(e.reviewCards).forEach(([,e])=>{(0,a.updateReviewCard)(e)}),(0,a.saveAchievements)(e.achievements),{success:!0,message:"Data imported successfully!"}}catch(e){return console.error("Error importing data:",e),{success:!1,message:`Error importing data: ${e instanceof Error?e.message:"Unknown error"}`}}}(r);e(s)}catch(t){e({success:!1,message:"Invalid JSON file"})}},r.onerror=()=>{e({success:!1,message:"Error reading file"})},r.readAsText(t)});u(r.message),r.success?setTimeout(()=>{window.location.reload()},1500):setTimeout(()=>u(null),3e3),e.target.value=""};if(!i||!e)return(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:(0,t.jsx)("div",{className:"text-center",children:"Loading progress..."})});let m=(0,n.getLevelFromXP)(e.totalXP),p=e.totalMovesPlayed>0?Math.round(e.correctMovesTotal/e.totalMovesPlayed*100):0;return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Your Progress"}),(0,t.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Track your chess opening mastery"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-slate-800 dark:to-slate-700 rounded-xl p-6 border border-purple-200 dark:border-purple-900",children:[(0,t.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:"LEVEL"}),(0,t.jsx)("div",{className:"text-5xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:m.level}),(0,t.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400 mb-3",children:(0,n.getLevelTitle)(m.level)}),(0,t.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-600 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all",style:{width:`${m.currentXP/m.xpForNextLevel*100}%`}})}),(0,t.jsxs)("div",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:[m.currentXP," / ",m.xpForNextLevel," XP"]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-slate-800 dark:to-slate-700 rounded-xl p-6 border border-green-200 dark:border-green-900",children:[(0,t.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:"TOTAL XP"}),(0,t.jsx)("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400 mb-4",children:e.totalXP.toLocaleString()}),(0,t.jsxs)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Earned from ",e.totalSessions," sessions"]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-slate-800 dark:to-slate-700 rounded-xl p-6 border border-blue-200 dark:border-blue-900",children:[(0,t.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:"ACCURACY"}),(0,t.jsxs)("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400 mb-4",children:[p,"%"]}),(0,t.jsxs)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[e.correctMovesTotal," / ",e.totalMovesPlayed," moves"]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-slate-800 dark:to-slate-700 rounded-xl p-6 border border-orange-200 dark:border-orange-900",children:[(0,t.jsx)("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:"STREAK"}),(0,t.jsx)("div",{className:"text-4xl font-bold text-orange-600 dark:text-orange-400 mb-4",children:e.currentStreak}),(0,t.jsx)("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Days of practice"})]})]}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Opening Mastery"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.openings.map(e=>{let r=(0,a.getOpeningProgress)(e.id),s=r?.totalMoves?Math.round(r.correctMoves/r.totalMoves*100):0,n="text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800",o="bg-red-500";return s>=70?(n="text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800",o="bg-green-500"):s>=40&&(n="text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-950 border-yellow-200 dark:border-yellow-800",o="bg-yellow-500"),(0,t.jsxs)("div",{className:`rounded-lg p-4 border ${n}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsxs)("span",{className:"text-sm font-bold",children:[s,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mb-2",children:(0,t.jsx)("div",{className:`${o} h-2 rounded-full transition-all`,style:{width:`${s}%`}})}),(0,t.jsxs)("div",{className:"text-xs opacity-75",children:[r?.completedCount||0," sessions â€¢ ",r?.correctMoves||0," correct"]})]},e.id)})})]}),(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Backup & Restore"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-slate-800 rounded-lg p-6 border border-blue-200 dark:border-blue-900",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"ðŸ’¾ Export Data"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Download a backup of all your progress as JSON"}),(0,t.jsx)("button",{onClick:()=>{let e,t,r,s,n,o,l,i;o=new Blob([JSON.stringify((e=(0,a.getAllOpeningProgress)(),t=(0,a.getUserStats)(),r=(0,a.getAllReviewCards)(),s=(0,a.getAchievements)(),n={},r.forEach(e=>{n[e.openingId]=e}),{version:"1.0",exportedAt:new Date().toISOString(),openingProgress:e,userStats:t,reviewCards:n,achievements:s}),null,2)],{type:"application/json"}),l=URL.createObjectURL(o),(i=document.createElement("a")).href=l,i.download=`chess-opening-trainer-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l),u("Export complete! Check your downloads folder."),setTimeout(()=>u(null),3e3)},className:"w-full px-4 py-2 bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-600 text-white rounded-lg font-semibold transition",children:"Download Backup"})]}),(0,t.jsxs)("div",{className:"bg-green-50 dark:bg-slate-800 rounded-lg p-6 border border-green-200 dark:border-green-900",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"ðŸ“‚ Import Data"}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Restore progress from a backup file"}),(0,t.jsx)("input",{type:"file",accept:".json",onChange:g,style:{display:"none"},id:"import-file"}),(0,t.jsx)("label",{htmlFor:"import-file",className:"block",children:(0,t.jsx)("button",{onClick:()=>document.getElementById("import-file")?.click(),className:"w-full px-4 py-2 bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-600 text-white rounded-lg font-semibold transition cursor-pointer",children:"Restore from File"})})]})]}),d&&(0,t.jsx)("div",{className:`mt-4 p-4 rounded-lg font-semibold text-white ${d.includes("successfully")?"bg-green-500":"bg-blue-500"}`,children:d})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(o.default,{href:"/",className:"px-6 py-3 bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-600 text-white rounded-lg font-semibold transition",children:"Back to Training"}),(0,t.jsx)("button",{onClick:()=>{confirm("Are you sure? This will delete all your progress.")&&(localStorage.clear(),window.location.reload())},className:"px-6 py-3 bg-red-600 dark:bg-red-700 hover:bg-red-700 dark:hover:bg-red-600 text-white rounded-lg font-semibold transition",children:"Clear All Progress"})]})]})}e.s(["default",()=>l],18040)}]);
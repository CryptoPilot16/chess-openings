(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),n=e.i(71645);function l(e){return new Date>=new Date(e.nextReview)}function r(e){let t=new Date;return t.setDate(t.getDate()+e),t}function s(e){let t=1,n=0;for(;;){let l=Math.floor(100*Math.pow(1.5,t-1));if(n+l>e)return{level:t,currentXP:e-n,xpForNextLevel:l,totalXP:e};n+=l,t++}}let a={"first-opening":{id:"first-opening",name:"First Steps",description:"Complete your first opening",icon:"ðŸŽ¯",target:1},"five-openings":{id:"five-openings",name:"Opening Explorer",description:"Complete 5 different openings",icon:"ðŸ—ºï¸",target:5},"perfect-run":{id:"perfect-run",name:"Perfectionist",description:"Complete an opening with 100% accuracy",icon:"ðŸ’Ž",target:1},"streak-5":{id:"streak-5",name:"On Fire",description:"Maintain a 5-session streak",icon:"ðŸ”¥",target:5},"streak-10":{id:"streak-10",name:"Unstoppable",description:"Maintain a 10-session streak",icon:"âš¡",target:10},"advanced-master":{id:"advanced-master",name:"Grandmaster",description:"Complete all advanced openings",icon:"ðŸ‘‘",target:1},"speed-demon":{id:"speed-demon",name:"Speed Demon",description:"Complete an opening in under 2 minutes",icon:"âš¡",target:1},"level-5":{id:"level-5",name:"Apprentice",description:"Reach level 5",icon:"â­",target:5},"level-10":{id:"level-10",name:"Expert",description:"Reach level 10",icon:"ðŸŒŸ",target:10},"level-20":{id:"level-20",name:"Master",description:"Reach level 20",icon:"âœ¨",target:20}},i="chess-trainer-openings",o="chess-trainer-stats",c="chess-trainer-reviews",d="chess-trainer-achievements";function u(e){try{let t=localStorage.getItem(i);if(!t)return null;return JSON.parse(t)[e]||null}catch(e){return console.error("Error reading opening progress:",e),null}}function m(){try{let e=localStorage.getItem(i);return e?JSON.parse(e):{}}catch(e){return console.error("Error reading all opening progress:",e),{}}}function p(){let e={totalSessions:0,totalMovesPlayed:0,correctMovesTotal:0,startedAt:new Date().toISOString(),lastActive:new Date().toISOString(),totalXP:0,totalCompletions:0,uniqueOpeningsCompleted:0,perfectRuns:0,currentStreak:0,bestStreak:0};try{let t=localStorage.getItem(o);if(!t)return localStorage.setItem(o,JSON.stringify(e)),e;let n=JSON.parse(t);return{...e,...n}}catch(t){return console.error("Error reading user stats:",t),e}}function x(e,t,n,l,x){let h=p(),f=u(e),v=t>0?n/t*100:0,b=0;l&&x&&(b=function(e,t,n,l){if(!n)return 0;let r=t/e,s=0;return r>=.95?s=50:r>=.85?s=30:r>=.75&&(s=15),Math.floor((50+s)*({beginner:1,intermediate:1.5,advanced:2})[l])}(t,n,!0,x.difficulty)),f?.completedCount;let N=l?(f?.currentStreak||0)+1:0;if(!function(e,t){try{let n=localStorage.getItem(i),l=n?JSON.parse(n):{},r=l[e]||{openingId:e,completedCount:0,lastPracticed:new Date().toISOString(),bestStreak:0,currentStreak:0,averageAccuracy:0,totalMoves:0,correctMoves:0};l[e]={...r,...t,lastPracticed:new Date().toISOString()},l[e].totalMoves>0&&(l[e].averageAccuracy=Math.round(l[e].correctMoves/l[e].totalMoves*100)),localStorage.setItem(i,JSON.stringify(l))}catch(e){console.error("Error saving opening progress:",e)}}(e,{completedCount:(f?.completedCount||0)+ +!!l,currentStreak:N,bestStreak:Math.max(N,f?.bestStreak||0),totalMoves:(f?.totalMoves||0)+t,correctMoves:(f?.correctMoves||0)+n}),l){let t=g(e);t||(t={openingId:e,easeFactor:2.5,interval:1,repetitions:0,nextReview:r(1).toISOString(),lastReview:new Date().toISOString()}),function(e){try{let t=localStorage.getItem(c),n=t?JSON.parse(t):{};n[e.openingId]=e,localStorage.setItem(c,JSON.stringify(n))}catch(e){console.error("Error saving review card:",e)}}(function(e,t){let n;if(e<3)return{...t,interval:1,repetitions:0,easeFactor:Math.max(1.3,t.easeFactor-.2),lastReview:new Date().toISOString(),nextReview:r(1).toISOString()};let l=t.repetitions+1;n=1===l?1:2===l?6:Math.round(t.interval*t.easeFactor);let s=Math.max(1.3,Math.min(2.5,t.easeFactor+(.1-(5-e)*(.08+(5-e)*.02))));return{...t,interval:n,repetitions:l,easeFactor:s,lastReview:new Date().toISOString(),nextReview:r(n).toISOString()}}(v>=95?5:v>=85?4:v>=75?3:v>=60?2:+(v>=40),t))}let w=Object.values(m()).filter(e=>e.completedCount>0).length,y=l?h.currentStreak+1:0;var j={totalSessions:h.totalSessions+1,totalMovesPlayed:h.totalMovesPlayed+t,correctMovesTotal:h.correctMovesTotal+n,totalXP:h.totalXP+b,totalCompletions:h.totalCompletions+ +!!l,uniqueOpeningsCompleted:w,perfectRuns:h.perfectRuns+(100===v&&l?1:0),currentStreak:y,bestStreak:Math.max(y,h.bestStreak)};try{let e={...p(),...j,lastActive:new Date().toISOString()};localStorage.setItem(o,JSON.stringify(e))}catch(e){console.error("Error saving user stats:",e)}let S=p(),k=function(){try{let e=localStorage.getItem(d);if(!e)return[];return JSON.parse(e)}catch(e){return console.error("Error reading achievements:",e),[]}}(),O=function(e,t,n){let l=[],r=new Date().toISOString();for(let[e,i]of Object.entries(a)){let a=n.find(t=>t.id===e);if(a?.unlockedAt)continue;let o=!1;switch(e){case"first-opening":t.totalCompletions,o=(t.totalCompletions||0)>=1;break;case"five-openings":t.uniqueOpeningsCompleted,o=(t.uniqueOpeningsCompleted||0)>=5;break;case"perfect-run":o=(t.perfectRuns||0)>=1;break;case"streak-5":t.currentStreak,o=(t.currentStreak||0)>=5;break;case"streak-10":t.currentStreak,o=(t.currentStreak||0)>=10;break;case"level-5":let c=s(t.totalXP||0);c.level,o=c.level>=5;break;case"level-10":let d=s(t.totalXP||0);d.level,o=d.level>=10;break;case"level-20":let u=s(t.totalXP||0);u.level,o=u.level>=20;break;default:continue}o&&l.push({...i,progress:100,unlockedAt:r})}return l}(0,S,k);return O.length>0&&function(e){try{localStorage.setItem(d,JSON.stringify(e))}catch(e){console.error("Error saving achievements:",e)}}([...k,...O]),{xpEarned:b,newAchievements:O}}function g(e){try{let t=localStorage.getItem(c);if(!t)return null;return JSON.parse(t)[e]||null}catch(e){return console.error("Error reading review card:",e),null}}function h({openings:e,onSelect:r}){let[s,a]=(0,n.useState)({}),[i,o]=(0,n.useState)([]);return(0,n.useEffect)(()=>{a(m()),o((function(){try{let e=localStorage.getItem(c);if(!e)return[];let t=JSON.parse(e);return Object.values(t)}catch(e){return console.error("Error reading review cards:",e),[]}})().filter(l).map(e=>e.openingId))},[]),(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:"â™Ÿï¸ Chess Opening Trainer"}),(0,t.jsx)("p",{className:"text-xl text-gray-600",children:"Master essential chess openings through interactive practice"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{let n,l,a=s[e.id],o=a&&a.completedCount>0,c=i.includes(e.id),d=g(e.id);return(0,t.jsxs)("button",{onClick:()=>r(e),className:`
                  bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 p-6 text-left hover:scale-105 transform
                  ${o?"ring-2 ring-green-400":""}
                  ${c?"ring-2 ring-orange-400 animate-pulse":""}
                `,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:`
                      px-3 py-1 rounded-full text-xs font-semibold uppercase
                      ${"beginner"===e.difficulty?"bg-green-100 text-green-800":""}
                      ${"intermediate"===e.difficulty?"bg-yellow-100 text-yellow-800":""}
                      ${"advanced"===e.difficulty?"bg-red-100 text-red-800":""}
                    `,children:e.difficulty}),o&&(0,t.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:["âœ“ ",a.completedCount]})]}),(0,t.jsx)("span",{className:"text-2xl",children:"â™”"})]}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"font-semibold",children:e.mainLine.length})," moves"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"font-semibold",children:e.variations.length})," variations"]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"First moves:"}),(0,t.jsxs)("p",{className:"font-mono text-sm text-gray-700",children:[e.mainLine.slice(0,4).join(" "),"..."]})]}),o&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex gap-3 text-xs text-gray-600 mb-2",children:[a.currentStreak>0&&(0,t.jsxs)("span",{children:["ðŸ”¥ ",a.currentStreak]}),(0,t.jsxs)("span",{children:["ðŸ“Š ",a.averageAccuracy,"%"]})]}),d&&(0,t.jsxs)("div",{className:`
                      text-xs font-semibold
                      ${c?"text-orange-600":"text-gray-500"}
                    `,children:["ðŸ“… ",(n=new Date,(l=Math.ceil((new Date(d.nextReview).getTime()-n.getTime())/864e5))<0?"Overdue!":0===l?"Due today":1===l?"Due tomorrow":l<7?`Due in ${l} days`:l<30?`Due in ${Math.round(l/7)} weeks`:`Due in ${Math.round(l/30)} months`)]})]})]},e.id)})}),(0,t.jsx)("div",{className:"mt-12 text-center text-gray-600",children:(0,t.jsx)("p",{className:"text-sm",children:"Click on an opening to start practicing. You'll be guided through each move with instant feedback."})})]})})}let f={p:"â™Ÿ",n:"â™ž",b:"â™",r:"â™œ",q:"â™›",k:"â™š",P:"â™™",N:"â™˜",B:"â™—",R:"â™–",Q:"â™•",K:"â™”"};function v({board:e,selectedSquare:l,onMove:r}){let[s,a]=(0,n.useState)([["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]]),[i,o]=(0,n.useState)(null),c=e||s,d=void 0!==l?l:i;return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 p-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-8 gap-0 border-4 border-gray-800 rounded-lg overflow-hidden shadow-2xl",children:c.map((e,n)=>e.map((e,s)=>{let i=(n+s)%2==0,u=d&&d[0]===n&&d[1]===s;return(0,t.jsx)("button",{onClick:()=>((e,t)=>{if(d){let[n,l]=d;if(r)r({row:n,col:l},{row:e,col:t})&&o(null);else{let r=c.map(e=>[...e]);r[e][t]=r[n][l],r[n][l]=null,a(r),o(null)}}else c[e][t]&&void 0===l&&o([e,t])})(n,s),className:`
                  w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20
                  flex items-center justify-center
                  text-3xl sm:text-4xl md:text-5xl
                  transition-all duration-150
                  ${i?"bg-amber-100":"bg-amber-700"}
                  ${u?"ring-4 ring-blue-500 ring-inset":""}
                  hover:brightness-110
                  active:brightness-90
                `,children:e&&(0,t.jsx)("span",{className:`
                      ${e===e.toUpperCase()?"text-white":"text-black"}
                      drop-shadow-md
                    `,children:f[e]})},`${n}-${s}`)}))}),(0,t.jsx)("div",{className:"text-sm text-gray-600 text-center",children:d?"Click a square to move":"Click a piece to select"})]})}let b=[["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]];function N(e){return e.charCodeAt(0)-97}function w(e){return 8-parseInt(e)}function y(e){return String.fromCharCode(97+e)}function j(e,t,n){let l=Math.sign(n.row-t.row),r=Math.sign(n.col-t.col),s=t.row+l,a=t.col+r;for(;s!==n.row||a!==n.col;){if(e[s][a])return!1;s+=l,a+=r}return!0}function S({opening:e,onComplete:l,onQuit:r}){let[a,i]=(0,n.useState)(b),[o,c]=(0,n.useState)(0),[d,m]=(0,n.useState)(null),[g,h]=(0,n.useState)(null),[f,S]=(0,n.useState)(!0),[k,O]=(0,n.useState)(!1),[C,P]=(0,n.useState)({movesPlayed:0,correctMoves:0}),[M,I]=(0,n.useState)(null),[D,$]=(0,n.useState)(0),[B,A]=(0,n.useState)([]),R=e.mainLine[o],L=o>=e.mainLine.length;(0,n.useEffect)(()=>{I(u(e.id))},[e.id]),(0,n.useEffect)(()=>{if(L){let t=x(e.id,C.movesPlayed,C.correctMoves,!0,e);$(t.xpEarned),A(t.newAchievements),O(!0),setTimeout(()=>{l?.()},3e3)}},[L,l,e.id,e,C]);let q=()=>{C.movesPlayed>0&&x(e.id,C.movesPlayed,C.correctMoves,!1,e),i(b),c(0),m(null),h(null),S(!0),O(!1),P({movesPlayed:0,correctMoves:0}),$(0),A([]),I(u(e.id))};if(L&&k){var T;let n=s(p().totalXP),l=Math.round(C.correctMoves/C.movesPlayed*100);return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6 p-8 min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[(0,t.jsxs)("div",{className:"text-center max-w-2xl",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),(0,t.jsx)("h2",{className:"text-3xl font-bold text-green-600 mb-2",children:"Opening Complete!"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:["You successfully completed the ",e.name]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[l,"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:["+",D]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"XP Earned"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:["Lvl ",n.level]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:(T=n.level)<5?"Novice":T<10?"Apprentice":T<15?"Intermediate":T<20?"Advanced":T<30?"Expert":T<50?"Master":"Grandmaster"})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,t.jsxs)("span",{children:["Level ",n.level]}),(0,t.jsxs)("span",{children:[n.currentXP," / ",n.xpForNextLevel," XP"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500",style:{width:`${n.currentXP/n.xpForNextLevel*100}%`}})})]})]}),B.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"ðŸ† New Achievements!"}),(0,t.jsx)("div",{className:"space-y-3",children:B.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-yellow-50 rounded-lg border-2 border-yellow-300",children:[(0,t.jsx)("span",{className:"text-4xl",children:e.icon}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-bold text-gray-800",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:q,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Practice Again"}),(0,t.jsx)("button",{onClick:r,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Choose Another Opening"})]})]})}return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6 p-4",children:[(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.description}),M&&M.completedCount>0&&(0,t.jsxs)("div",{className:"flex gap-4 mt-2 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["âœ“ Completed ",M.completedCount,"x"]}),(0,t.jsxs)("span",{children:["ðŸ”¥ Streak: ",M.currentStreak]}),(0,t.jsxs)("span",{children:["ðŸ“Š Accuracy: ",M.averageAccuracy,"%"]})]})]}),(0,t.jsx)("span",{className:`
            px-3 py-1 rounded-full text-xs font-semibold uppercase flex-shrink-0
            ${"beginner"===e.difficulty?"bg-green-100 text-green-800":""}
            ${"intermediate"===e.difficulty?"bg-yellow-100 text-yellow-800":""}
            ${"advanced"===e.difficulty?"bg-red-100 text-red-800":""}
          `,children:e.difficulty})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[o," / ",e.mainLine.length," moves"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${o/e.mainLine.length*100}%`}})})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-blue-600 font-semibold mb-1",children:f?"âšª White to move":"âš« Black to move"}),(0,t.jsx)("p",{className:"text-lg font-mono font-bold text-blue-900",children:R})]}),(0,t.jsx)("button",{onClick:()=>{R&&h(`Try ${R}`)},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition text-sm",children:"ðŸ’¡ Hint"})]}),g&&(0,t.jsx)("div",{className:"mt-3 pt-3 border-t border-blue-200",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Hint:"})," ",g]})})]})]}),d&&(0,t.jsx)("div",{className:`
          px-6 py-3 rounded-lg font-semibold text-white shadow-lg
          transform transition-all duration-300
          ${"correct"===d?"bg-green-500 scale-105":"bg-red-500 animate-shake"}
        `,children:"correct"===d?"âœ“ Correct!":"âœ— Try again"}),(0,t.jsx)(v,{board:a,onMove:(e,t)=>{let n=function(e,t,n){let l=e[t.row][t.col];if(!l)return null;let r=l.toLowerCase(),s=y(n.col),a=8-n.row;if("k"===r&&2===Math.abs(n.col-t.col))return 6===n.col?"O-O":"O-O-O";let i=e[n.row][n.col],o=i?"x":"";if("p"===r){if(i){let e=y(t.col);return`${e}${o}${s}${a}`}return`${s}${a}`}let c=l.toUpperCase();return`${c}${o}${s}${a}`}(a,e,t);if(!n)return m("incorrect"),setTimeout(()=>m(null),1e3),!1;let l=R.replace(/[+#!?]/g,"");if(n.replace(/[+#!?]/g,"")!==l)return m("incorrect"),P(e=>({...e,movesPlayed:e.movesPlayed+1})),setTimeout(()=>m(null),1e3),!1;{m("correct"),h(null),P(e=>({movesPlayed:e.movesPlayed+1,correctMoves:e.correctMoves+1}));let e=function(e,t,n){let l=e.trim();if("O-O"===l||"O-O-O"===l){let e=7*!!n,t=n?"K":"k";return"O-O"===l?{from:{row:e,col:4},to:{row:e,col:6},piece:t,algebraic:l}:{from:{row:e,col:4},to:{row:e,col:2},piece:t,algebraic:l}}let r=l.replace(/[+#!?]/g,""),s="P",a=r;/^[NBRQK]/.test(r)&&(s=r[0],a=r.slice(1));let i=n?s:s.toLowerCase(),o=a.includes("x");o&&(a=a.replace("x",""));let c=a[a.length-2],d=a[a.length-1],u=N(c),m=w(d),p=null,x=null;if("P"===s&&3===a.length&&o)p=N(a[0]);else if(a.length>2){let e=a.slice(0,-2);/[a-h]/.test(e[0])&&(p=N(e[0])),/[1-8]/.test(e[e.length-1])&&(x=w(e[e.length-1]))}let g=function(e,t,n,l,r){if(!t)return null;let s=t===t.toUpperCase(),a=t.toLowerCase();for(let t=0;t<8;t++)if(null===l||t===l)for(let l=0;l<8;l++){if(null!==r&&l!==r)continue;let i=e[t][l];if(i?.toLowerCase()===a&&i===i.toUpperCase()===s&&function(e,t,n,l){let r=Math.abs(n.row-t.row),s=Math.abs(n.col-t.col),a=e[t.row][t.col],i=a===a?.toUpperCase();switch(l){case"p":{let l=i?-1:1;if(t.col===n.col&&!e[n.row][n.col]){if(n.row===t.row+l)return!0;if(t.row===(i?6:1)&&n.row===t.row+2*l)return!e[t.row+l][t.col]}if(1===s&&n.row===t.row+l&&e[n.row][n.col])return!0;return!1}case"n":return 2===r&&1===s||1===r&&2===s;case"b":if(r!==s)return!1;return j(e,t,n);case"r":if(t.row!==n.row&&t.col!==n.col)return!1;return j(e,t,n);case"q":if(t.row!==n.row&&t.col!==n.col&&r!==s)return!1;return j(e,t,n);case"k":return r<=1&&s<=1;default:return!1}}(e,{row:t,col:l},n,a))return{row:t,col:l}}return null}(t,i,{row:m,col:u},x,p);return g?{from:g,to:{row:m,col:u},piece:i,captured:t[m][u],algebraic:l}:null}(R,a,f);return e&&(i(function(e,t){let n=e.map(e=>[...e]);if("O-O"===t.algebraic){let e=t.from.row,l="K"===t.piece;return n[e][6]=t.piece,n[e][4]=null,n[e][5]=l?"R":"r",n[e][7]=null,n}if("O-O-O"===t.algebraic){let e=t.from.row,l="K"===t.piece;return n[e][2]=t.piece,n[e][4]=null,n[e][3]=l?"R":"r",n[e][0]=null,n}return n[t.to.row][t.to.col]=t.piece,n[t.from.row][t.from.col]=null,n}(a,e)),S(!f),c(o+1),setTimeout(()=>m(null),800)),!0}},selectedSquare:null}),(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"Key Ideas"}),(0,t.jsx)("ul",{className:"space-y-2",children:e.keyIdeas.map((e,n)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-gray-700",children:[(0,t.jsx)("span",{className:"text-blue-600 mt-1",children:"â€¢"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},n))})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:q,className:"px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"Reset"}),(0,t.jsx)("button",{onClick:r,className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Quit"})]})]})}let k=[{id:"italian-game",name:"Italian Game",description:"One of the oldest recorded openings, focusing on quick development and control of the center.",difficulty:"beginner",mainLine:["e4","e5","Nf3","Nc6","Bc4","Bc5","c3","d6","d4"],keyIdeas:["Control the center with pawns","Develop pieces quickly (knights before bishops)","Castle kingside early for safety","Attack the weak f7 square","Build a strong pawn center with c3 and d4"],variations:[{name:"Giuoco Piano",moves:["e4","e5","Nf3","Nc6","Bc4","Bc5","c3"]},{name:"Two Knights Defense",moves:["e4","e5","Nf3","Nc6","Bc4","Nf6"]}]},{id:"sicilian-defense",name:"Sicilian Defense",description:"The most popular and aggressive response to 1.e4, leading to asymmetrical positions.",difficulty:"intermediate",mainLine:["e4","c5","Nf3","d6","d4","cxd4","Nxd4","Nf6","Nc3"],keyIdeas:["Fight for central control with c5 instead of e5","Create asymmetrical pawn structures","Counterattack on the queenside","Maintain tension in the center","Accept complex tactical positions"],variations:[{name:"Najdorf Variation",moves:["e4","c5","Nf3","d6","d4","cxd4","Nxd4","Nf6","Nc3","a6"]},{name:"Dragon Variation",moves:["e4","c5","Nf3","d6","d4","cxd4","Nxd4","Nf6","Nc3","g6"]}]},{id:"french-defense",name:"French Defense",description:"A solid defense creating a strong pawn chain, though temporarily restricting the c8 bishop.",difficulty:"intermediate",mainLine:["e4","e6","d4","d5","Nc3","Nf6","Bg5"],keyIdeas:["Create a solid pawn structure with e6 and d5","Challenge white's center immediately","Plan to break with ...c5 or ...f6","Accept a temporarily passive c8 bishop","Counterattack on the queenside"],variations:[{name:"Winawer Variation",moves:["e4","e6","d4","d5","Nc3","Bb4"]},{name:"Tarrasch Variation",moves:["e4","e6","d4","d5","Nd2"]}]},{id:"queens-gambit",name:"Queen's Gambit",description:"A classical opening where White offers a pawn to gain central control and faster development.",difficulty:"intermediate",mainLine:["d4","d5","c4","e6","Nc3","Nf6","Bg5"],keyIdeas:["Offer the c4 pawn to challenge Black's center","Control the center with pieces after ...dxc4","Develop smoothly with Nc3, Nf3, and Bg5","Put pressure on Black's position","Maintain central control"],variations:[{name:"Queen's Gambit Declined",moves:["d4","d5","c4","e6","Nc3","Nf6"]},{name:"Queen's Gambit Accepted",moves:["d4","d5","c4","dxc4"]}]},{id:"ruy-lopez",name:"Ruy LÃ³pez",description:"Also known as the Spanish Opening, this classical opening puts immediate pressure on e5.",difficulty:"advanced",mainLine:["e4","e5","Nf3","Nc6","Bb5","a6","Ba4","Nf6","O-O"],keyIdeas:["Put pressure on the e5 pawn immediately","Develop pieces harmoniously","Maintain flexibility with the light-squared bishop","Castle kingside quickly","Build a strong center"],variations:[{name:"Berlin Defense",moves:["e4","e5","Nf3","Nc6","Bb5","Nf6"]},{name:"Marshall Attack",moves:["e4","e5","Nf3","Nc6","Bb5","a6","Ba4","Nf6","O-O","Be7","Re1","b5","Bb3","O-O","d4","d5"]}]}];function O(){let[e,l]=(0,n.useState)(null);return e?(0,t.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-700",children:(0,t.jsx)(S,{opening:e,onComplete:()=>{l(null)},onQuit:()=>l(null)})}):(0,t.jsx)(h,{openings:k,onSelect:l})}e.s(["default",()=>O],31713)}]);